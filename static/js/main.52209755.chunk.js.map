{"version":3,"sources":["models/models.tsx","logic/logic.ts","components/bits/UserAvatar.tsx","components/modals/ModalHeader.tsx","components/bits/UserChip.tsx","components/modals/ExcludedUsersModal.tsx","components/modals/EntryUserModal.tsx","components/modals/RemoveEntryModal.tsx","components/entries/EntriesRow.tsx","components/entries/EntriesHeader.tsx","components/entries/Entries.tsx","components/bits/AutosaveMessage.tsx","components/header/Header.tsx","components/modals/AddUserModal.tsx","firebase.ts","components/modals/SettingsModal.tsx","components/modals/RemoveUserModal.tsx","components/modals/SaveSheetModal.tsx","components/users/UsersBar.tsx","components/dialog/overview/OverviewHeader.tsx","components/dialog/overview/OverviewRow.tsx","components/dialog/overview/Overview.tsx","components/dialog/breakdown/BreakdownHeader.tsx","components/dialog/breakdown/BreakdownRow.tsx","components/dialog/breakdown/Breakdown.tsx","components/dialog/SideDialog.tsx","components/bits/AddItemFab.tsx","actions/sheetActions.ts","components/pages/CreateNewSheet.tsx","components/modals/PasswordUserModal.tsx","components/pages/ViewOnDesktop.tsx","components/pages/SplitTheCost.tsx","assets/homepage.png","assets/blob.svg","components/pages/HomePage.tsx","actions/appUserActions.ts","components/pages/PageNotFound.tsx","components/pages/SheetNotFound.tsx","components/pages/TermsOfService.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["SaveState","validateName","name","length","test","validateSheetTitle","title","validateCustomSheetLink","link","validatePassword","password","getAvatarColor","user","userIdx","placeholder","colors","handleKeyPress","e","target","action","key","toLowerCase","UserAvatar","tooltipPlacement","onClick","iconOnHover","disabled","className","useState","hover","setHover","Tooltip","arrow","displayName","placement","Avatar","style","backgroundColor","cursor","onMouseEnter","onMouseLeave","initials","ModalHeader","subtitle","onClose","DialogTitle","IconButton","size","UserChip","onRemove","Chip","avatar","label","onDelete","id","ExcludedUsersModal","open","setOpen","entry","useContext","SheetContext","sheetState","sheetDispatch","exclude","excludedUsers","setExcludedUsers","confirmExcludeUsers","type","handleClose","handleClick","userId","includes","filter","useEffect","Dialog","fullWidth","disableBackdropClick","maxWidth","onKeyPress","PaperProps","item","DialogContent","Object","entries","users","map","pair","idx","Checkbox","checked","color","keys","indexOf","DialogActions","Button","EntryUserModal","entryUser","setEntryUser","confirmEntryUser","section","value","Radio","RemoveEntryModal","confirmRemoveEntry","entryId","EntriesRow","rowIdx","cost","note","emptyRow","setEmptyRow","showDelete","setShowDelete","showEdit","setShowEdit","setItem","setNote","showExcludeUsersModal","setShowExcludeUsersModal","showEntryUserModal","setShowEntryUserModal","showRemoveEntryModal","setShowRemoveEntryModal","updateEntry","local","Number","div","animate","x","opacity","initial","transition","duration","Grid","container","spacing","xs","onMouseOver","readOnly","undefined","Input","disableUnderline","onFocus","onChange","onBlur","toFixed","startAdornment","InputAdornment","position","inputComponent","NumberFormat","inputProps","decimalScale","allowNegative","thousandSeparator","allowLeadingZeros","EntriesHeader","Entries","userState","UserContext","authenticated","curUser","createdBy","AutosaveMessage","saveState","Unsaved","Saving","fontSize","Header","AddUserModal","firstName","setFirstName","validFirstName","setValidFirstName","lastName","setLastName","validLastName","setValidLastName","uniqueUser","setUniqueUser","resetDialog","confirmAddUser","numUsers","first","trim","toLocaleLowerCase","last","checkFirstName","checkLastName","unique","forEach","validateNewUser","email","TextField","autoFocus","error","helperText","fire","firebase","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","sheetStateConverter","toFirestore","timestamp","lastAccessed","lastEdited","customLink","fromFirestore","snapshot","options","data","db","auth","firestore","GoogleAuthProvider","SettingsModal","history","useHistory","sheetTitle","setSheetTitle","editTitle","setEditTitle","validTitle","setValidTitle","sheetLink","setSheetLink","editLink","setEditLink","validLink","setValidLink","uniqueLink","setUniqueLink","setReadOnly","setPassword","editPassword","setEditPassword","validPassword","setValidPassword","viewPassword","setViewPassword","password2","setPassword2","passwordsMatch","setPasswordsMatch","deleteText","setDeleteText","editDelete","setEditDelete","deleteError","setDeleteError","cancelSheetTitle","cancelCustomLink","cancelPassword","cancelDeleteSheet","handleEditSheetTitle","confirmSheetTitle","handleEditCustomLink","confirmCustomLink","a","linkTrimmed","temp","collection","doc","get","exists","push","copySheetLink","navigator","clipboard","writeText","handleEditReadOnly","handleEditPassword","confirmPassword","removePassword","handleDeleteSheet","confirmDeleteSheet","alignItems","inputRef","titleRef","focus","InputProps","justify","linkRef","FormControlLabel","control","Switch","deleteRef","RemoveUserModal","removeUser","confirmRemoveUser","SaveSheetModal","buttonText","setButtonText","Promise","r","setTimeout","UsersBar","userDispatch","openAddUser","setOpenAddUser","openRemoveUser","setOpenRemoveUser","openSettings","setOpenSettings","openSaveSheet","setOpenSaveSheet","setRemoveUser","openAddUserModal","openRemoveUserModal","darkMode","OverviewHeader","OverviewRow","totalSpent","totalOwed","Overview","overviewData","setOverviewData","validUsers","userCost","calculateOverview","BreakdownHeader","BreakdownRow","netCost","theyOwe","youOwe","debtedUser","owedUser","Math","abs","Breakdown","breakdownData","setBreakdownData","userBreakdown","numEntryUsers","calculateUserBreakdown","SideDialog","tab","setTab","exit","TabContext","Tabs","event","indicatorColor","textColor","Tab","TabPanel","Fab","variant","AddItemFab","sheetReducer","state","newEntry","nanoid","Date","now","toUTCString","newSheetState","updateFirestore","addEntry","newEntries","removeEntry","replaceAll","duplicateUser","newUser","charAt","toLocaleUpperCase","addUser","newUsers","newExcludedUsers","curId","updatedEntry","updateExcludedUsers","removeExcludedUser","changeSheetTitle","delete","firebaseLink","sheetId","set","changeSheetLink","bcrypt","require","saltRounds","hash","err","updateSheetPassword","removeSheetPassword","saveSheet","setAutosaveState","autosaveSheet","updateReadOnly","withConverter","deleteSheet","CreateSheetStep","PasswordUserModal","selectedUser","setSelectedUser","compare","res","confirmUser","handleEnter","CircularProgress","ViewOnDesktop","initialSheetState","createContext","SplitTheCost","isMobile","window","innerWidth","location","useLocation","useParams","useReducer","Saved","autosaveState","sheetSnapshot","fetchedSheetState","customLinkSnapshot","actualSheetId","customSheetSnapshot","customFetchedSheetState","pathname","fetchSheetState","generateNewSheetState","saveInterval","setInterval","clearInterval","Provider","HomePage","alignContent","src","blob","alt","homepage","to","userReducer","removeCurUser","updateCurUser","setDarkMode","setAuthStatus","CreateNewSheet","SheetName","step","setStep","agreeToTerms","setAgreeToTerms","handleTitleButton","DisplayName","handleNameButton","validFirst","validLast","createNewSheet","sheetNameStep","FormHelperTextProps","PageNotFound","SheetNotFound","TermsOfService","initialUserState","App","enableDarkMode","brightness","contrast","sepia","disableDarkMode","path","exact","component","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.52209755.chunk.js","sourcesContent":["export interface User {\n  id: string;\n  firstName: string;\n  lastName: string;\n  initials: string;\n  displayName: string;\n  email: string;\n}\n\nexport interface Entry {\n  id: string;\n  timestamp: string;\n  lastEdited: number;\n  item: string;\n  cost: number;\n  exclude: string[];\n  user: string;\n  createdBy: string;\n  note: string;\n}\n\nexport interface OverviewData {\n  [userId: string]: { totalSpent: number; totalOwed: number };\n}\n\nexport interface UserBreakdownData {\n  user: User;\n  totalSpent: number;\n  totalOwed: number;\n  userBreakdown: { [userId: string]: { youOwe: number; theyOwe: number } };\n}\n\nexport interface SheetSettings {\n  darkMode: boolean;\n  viewOnly: boolean;\n}\n\nexport interface SheetState {\n  id: string;\n  timestamp: string;\n  lastAccessed: number;\n  lastEdited: number;\n  title: string;\n  entries: Entry[];\n  users: { [userId: string]: User };\n  numUsers: number;\n  createdBy: string;\n  local: boolean;\n  readOnly: boolean;\n  customLink?: string;\n  password?: string;\n}\n\nexport interface UserState {\n  curUser: User | undefined;\n  darkMode: boolean;\n  authenticated: boolean;\n}\n\nexport enum SaveState {\n  Unsaved = 1,\n  Saving = 2,\n  Saved = 3,\n}\n","import { User, Entry, UserBreakdownData, OverviewData } from \"../models/models\";\n\n// Calculates and returns the breakdown data.\nexport function calculateUserBreakdown(\n  user: User,\n  entries: Entry[],\n  users: { [id: string]: User }\n): UserBreakdownData {\n  let breakdownData: UserBreakdownData = {\n    user: user,\n    totalSpent: 0,\n    totalOwed: 0,\n    userBreakdown: {},\n  };\n\n  Object.entries(users).forEach((pair) => {\n    let curUser = pair[1];\n    if (curUser !== user) {\n      breakdownData.userBreakdown[curUser.id] = { theyOwe: 0, youOwe: 0 };\n    }\n  });\n\n  entries.forEach((entry) => {\n    const numEntryUsers = Object.keys(users).length - entry.exclude.length;\n    if (entry.user === user.id) {\n      // This is the current user's entry. Add the cost to totalSpent and\n      // increment \"theyOwe\" for all valid users.\n      breakdownData.totalSpent += entry.cost;\n\n      const validUsers = Object.keys(users).filter(\n        (userId) => !entry.exclude.includes(userId) && userId !== entry.user\n      );\n      validUsers.forEach((userId) => {\n        breakdownData.userBreakdown[userId].theyOwe +=\n          entry.cost / numEntryUsers;\n      });\n    } else if (!entry.exclude.includes(user.id)) {\n      // This is another user's entry that you need to pay for. Add the cost to\n      // totalOwed and increment \"youOwe\" for this particular user.\n      breakdownData.totalOwed += entry.cost / numEntryUsers;\n      breakdownData.userBreakdown[entry.user].youOwe +=\n        entry.cost / numEntryUsers;\n    }\n  });\n\n  return breakdownData;\n}\n\n// Calculates and returns the overview data.\nexport function calculateOverview(\n  entries: Entry[],\n  users: { [id: string]: User }\n): OverviewData {\n  let overviewData: OverviewData = {};\n\n  // Create entries for each user.\n  Object.entries(users).forEach((pair) => {\n    let user = pair[1];\n    overviewData[user.id] = { totalSpent: 0, totalOwed: 0 };\n  });\n\n  entries.forEach((entry) => {\n    overviewData[entry.user].totalSpent += entry.cost;\n\n    const validUsers = Object.keys(users).filter(\n      (userId) => !entry.exclude.includes(userId)\n    );\n    const userCost = entry.cost / validUsers.length;\n\n    validUsers.forEach((userId) => {\n      if (userId !== entry.user) {\n        overviewData[userId].totalOwed += userCost;\n      }\n    });\n  });\n\n  return overviewData;\n}\n\n// Returns true if a name is valid, false otherwise.\n// Assumes the name has no leading/trailing whitespace.\nexport function validateName(name: string): boolean {\n  return (\n    name.length >= 1 && name.length <= 20 && /^[a-zA-Z'-\\s.()]+$/.test(name)\n  );\n}\n\n// Returns true if a sheet title is valid, false otherwise.\n// Assumes the title has no leading/trailing whitespace.\nexport function validateSheetTitle(title: string): boolean {\n  return (\n    title.length >= 3 &&\n    title.length <= 41 &&\n    /^[0-9a-zA-Z!@#'-\\s]+$/.test(title)\n  );\n}\n\n// Returns true if a custom sheet link is valid, false otherwise.\n// Assumes the title has no leading/trailing whitespace.\nexport function validateCustomSheetLink(link: string): boolean {\n  return link.length >= 5 && link.length <= 20 && /^[0-9a-zA-Z]+$/.test(link);\n}\n\n// Returns true if a sheet password is valid, false otherwise.\n// Assumes the password has no leading/trailing whitespace.\nexport function validatePassword(password: string): boolean {\n  return (\n    password.length >= 4 &&\n    password.length <= 25 &&\n    /^[0-9a-zA-Z!@#$?]+$/.test(password)\n  );\n}\n\n// \"Calculates\" an avatar's color.\nexport function getAvatarColor(\n  user: User,\n  userIdx: number,\n  placeholder?: boolean\n): string {\n  if (placeholder) return \"#dedede\";\n\n  const colors = [\n    \"#AD1457\",\n    \"#F9A825\",\n    \"#1565C0\",\n    \"#4527A0\",\n    \"#D84315\",\n    \"#4E342E\",\n    \"#00838F\",\n    \"#0277BD\",\n    \"#EF6C00\",\n    \"#424242\",\n  ];\n\n  return colors[userIdx % colors.length];\n}\n\nexport function handleKeyPress(\n  e: React.KeyboardEvent,\n  target: string,\n  action: () => void\n) {\n  if (e.key.toLowerCase() === target) {\n    action();\n  }\n}\n","import * as React from \"react\";\nimport { Avatar, Tooltip } from \"@material-ui/core\";\nimport { User } from \"../../models/models\";\nimport { getAvatarColor } from \"../../logic/logic\";\nimport { useState } from \"react\";\n\ninterface Props {\n  user: User;\n  userIdx: number;\n  tooltipPlacement:\n    | \"top\"\n    | \"left\"\n    | \"right\"\n    | \"bottom-end\"\n    | \"bottom-start\"\n    | \"bottom\"\n    | \"left-end\"\n    | \"left-start\"\n    | \"right-end\"\n    | \"right-start\"\n    | \"top-end\"\n    | \"top-start\"\n    | undefined;\n  onClick?: () => void;\n  iconOnHover?: JSX.Element;\n  disabled?: boolean;\n  className?: string;\n}\n\nexport const UserAvatar: React.FC<Props> = ({\n  user,\n  userIdx,\n  tooltipPlacement,\n  onClick,\n  iconOnHover,\n  disabled,\n  className,\n}) => {\n  const [hover, setHover] = useState(false);\n\n  return (\n    <Tooltip\n      className={className}\n      arrow\n      title={user.displayName}\n      placement={tooltipPlacement}\n      onClick={onClick}\n    >\n      <Avatar\n        className='avatar'\n        style={{\n          backgroundColor: getAvatarColor(user, userIdx, disabled),\n          cursor: onClick ? \"pointer\" : \"default\",\n        }}\n      >\n        <span\n          onMouseEnter={() => setHover(true)}\n          onMouseLeave={() => setHover(false)}\n        >\n          {hover ? (iconOnHover ? iconOnHover : user.initials) : user.initials}\n        </span>\n      </Avatar>\n    </Tooltip>\n  );\n};\n","import * as React from \"react\";\nimport { DialogTitle, IconButton } from \"@material-ui/core\";\nimport CloseRoundedIcon from \"@material-ui/icons/CloseRounded\";\n\ninterface Props {\n  title: string;\n  subtitle?: string;\n  onClose?: () => void;\n}\n\nexport const ModalHeader: React.FC<Props> = ({ title, subtitle, onClose }) => {\n  return (\n    <DialogTitle className='modalTitle'>\n      {title}\n      {subtitle && (\n        <>\n          {\" \"}\n          | <b>{`${subtitle}`}</b>\n        </>\n      )}\n      {onClose && (\n        <IconButton className='modalClose' size='small' onClick={onClose}>\n          <CloseRoundedIcon />\n        </IconButton>\n      )}\n    </DialogTitle>\n  );\n};\n","import * as React from \"react\";\nimport { Avatar, Chip } from \"@material-ui/core\";\nimport { User } from \"../../models/models\";\nimport { getAvatarColor } from \"../../logic/logic\";\n\ninterface Props {\n  user: User;\n  userIdx: number;\n  onRemove?: (user: User) => void;\n  onClick?: (user: User) => void;\n  className?: string;\n}\n\nexport const UserChip: React.FC<Props> = ({\n  user,\n  userIdx,\n  onRemove,\n  onClick,\n  className,\n}) => {\n  return (\n    <span onClick={onClick && (() => onClick(user))}>\n      <Chip\n        className={`chip ${className} ${onClick && \"linkCursor\"}`}\n        avatar={\n          <Avatar\n            className='smallAvatar'\n            style={{ backgroundColor: getAvatarColor(user, userIdx) }}\n          >\n            {user.initials}\n          </Avatar>\n        }\n        label={user.displayName}\n        onDelete={onRemove && (() => onRemove(user))}\n        key={user.id}\n      />\n    </span>\n  );\n};\n","import * as React from \"react\";\nimport {\n  Button,\n  Checkbox,\n  Dialog,\n  DialogActions,\n  DialogContent,\n} from \"@material-ui/core\";\nimport { Entry } from \"../../models/models\";\nimport { useState, useContext, useEffect } from \"react\";\nimport { SheetContext } from \"../pages/SplitTheCost\";\nimport { ModalHeader } from \"./ModalHeader\";\nimport { UserChip } from \"../bits/UserChip\";\nimport { handleKeyPress } from \"../../logic/logic\";\n\ninterface Props {\n  open: boolean;\n  setOpen: React.Dispatch<React.SetStateAction<boolean>>;\n  entry: Entry;\n}\n\nexport const ExcludedUsersModal: React.FC<Props> = ({\n  open,\n  setOpen,\n  entry,\n}) => {\n  const { sheetState, sheetDispatch } = useContext(SheetContext);\n\n  const [excludedUsers, setExcludedUsers] = useState<string[]>(entry.exclude);\n\n  useEffect(() => {\n    setExcludedUsers(entry.exclude);\n  }, [entry.exclude]);\n\n  function confirmExcludeUsers() {\n    if (entry.exclude !== excludedUsers) {\n      sheetDispatch({\n        type: \"updateExcludedUsers\",\n        exclude: excludedUsers,\n        entry: entry,\n      });\n    }\n\n    handleClose();\n  }\n\n  function handleClick(userId: string) {\n    if (excludedUsers.includes(userId)) {\n      setExcludedUsers(excludedUsers.filter((id) => id !== userId));\n    } else {\n      setExcludedUsers([...excludedUsers, userId]);\n    }\n  }\n\n  function handleClose() {\n    setExcludedUsers(entry.exclude);\n    setOpen(false);\n  }\n\n  return (\n    <Dialog\n      fullWidth\n      disableBackdropClick\n      maxWidth='xs'\n      onClose={handleClose}\n      open={open}\n      onKeyPress={(e) => handleKeyPress(e, \"enter\", confirmExcludeUsers)}\n      PaperProps={{ className: \"modal\" }}\n    >\n      <ModalHeader\n        title='Included Friends'\n        subtitle={entry.item}\n        onClose={handleClose}\n      />\n      <DialogContent className='excludeModalContent'>\n        <div className='excludeModalColumn'>\n          {Object.entries(sheetState.users).map((pair, idx) => {\n            const user = pair[1];\n            return (\n              idx % 2 === 0 && (\n                <div className='excludeModalUser' key={user.id}>\n                  <Checkbox\n                    checked={!excludedUsers.includes(user.id)}\n                    color='primary'\n                    onClick={() => handleClick(user.id)}\n                  />\n                  <UserChip\n                    user={user}\n                    userIdx={Object.keys(sheetState.users).indexOf(user.id)}\n                    onClick={() => handleClick(user.id)}\n                  />\n                </div>\n              )\n            );\n          })}\n        </div>\n        <div className='excludeModalColumn'>\n          {Object.entries(sheetState.users).map((pair, idx) => {\n            const user = pair[1];\n            return (\n              idx % 2 === 1 && (\n                <div className='excludeModalUser' key={user.id}>\n                  <Checkbox\n                    checked={!excludedUsers.includes(user.id)}\n                    color='primary'\n                    onClick={() => handleClick(user.id)}\n                  />\n                  <UserChip\n                    user={user}\n                    userIdx={Object.keys(sheetState.users).indexOf(user.id)}\n                    onClick={() => handleClick(user.id)}\n                  />\n                </div>\n              )\n            );\n          })}\n        </div>\n      </DialogContent>\n      <DialogActions className='modalActions'>\n        <Button\n          className='rightMarginSmall'\n          color='primary'\n          onClick={() => setExcludedUsers([])}\n        >\n          Include All\n        </Button>\n        <Button\n          className='modalConfirmButton rightMarginSmall'\n          onClick={confirmExcludeUsers}\n        >\n          Confirm\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n","import * as React from \"react\";\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  Radio,\n} from \"@material-ui/core\";\nimport { Entry } from \"../../models/models\";\nimport { useState, useContext, useEffect } from \"react\";\nimport { SheetContext } from \"../pages/SplitTheCost\";\nimport { ModalHeader } from \"./ModalHeader\";\nimport { UserChip } from \"../bits/UserChip\";\nimport { handleKeyPress } from \"../../logic/logic\";\n\ninterface Props {\n  open: boolean;\n  setOpen: React.Dispatch<React.SetStateAction<boolean>>;\n  entry: Entry;\n}\n\nexport const EntryUserModal: React.FC<Props> = ({ open, setOpen, entry }) => {\n  const { sheetState, sheetDispatch } = useContext(SheetContext);\n\n  const [entryUser, setEntryUser] = useState(entry.user);\n\n  useEffect(() => {\n    setEntryUser(entry.user);\n  }, [entry.user]);\n\n  function confirmEntryUser() {\n    if (entryUser && entryUser !== entry.user) {\n      sheetDispatch({\n        type: \"updateEntry\",\n        entry: entry,\n        section: \"user\",\n        value: entryUser,\n      });\n      handleClose();\n    }\n  }\n\n  function handleClick(userId: string) {\n    setEntryUser(userId);\n  }\n\n  function handleClose() {\n    setEntryUser(entry.user);\n    setOpen(false);\n  }\n\n  return (\n    <Dialog\n      fullWidth\n      disableBackdropClick\n      maxWidth='xs'\n      onClose={handleClose}\n      open={open}\n      onKeyPress={(e) => handleKeyPress(e, \"enter\", confirmEntryUser)}\n      PaperProps={{ className: \"modal\" }}\n    >\n      <ModalHeader\n        title='Who Paid?'\n        subtitle={entry.item}\n        onClose={handleClose}\n      />\n      <DialogContent className='excludeModalContent'>\n        <div className='excludeModalColumn'>\n          {Object.entries(sheetState.users).map((pair, idx) => {\n            const user = pair[1];\n            return (\n              idx % 2 === 0 && (\n                <div className='excludeModalUser' key={user.id}>\n                  <Radio\n                    checked={entryUser === user.id}\n                    onClick={() => handleClick(user.id)}\n                  />\n                  <UserChip\n                    user={user}\n                    userIdx={Object.keys(sheetState.users).indexOf(user.id)}\n                    onClick={() => handleClick(user.id)}\n                  />\n                </div>\n              )\n            );\n          })}\n        </div>\n        <div className='excludeModalColumn'>\n          {Object.entries(sheetState.users).map((pair, idx) => {\n            const user = pair[1];\n            return (\n              idx % 2 === 1 && (\n                <div className='excludeModalUser' key={user.id}>\n                  <Radio\n                    checked={entryUser === user.id}\n                    onClick={() => handleClick(user.id)}\n                  />\n                  <UserChip\n                    user={user}\n                    userIdx={Object.keys(sheetState.users).indexOf(user.id)}\n                    onClick={() => handleClick(user.id)}\n                  />\n                </div>\n              )\n            );\n          })}\n        </div>\n      </DialogContent>\n      <DialogActions className='modalActions'>\n        <Button\n          className='modalConfirmButton rightMarginSmall'\n          onClick={confirmEntryUser}\n        >\n          Confirm\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n","import * as React from \"react\";\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n} from \"@material-ui/core\";\nimport { useContext } from \"react\";\nimport { SheetContext } from \"../pages/SplitTheCost\";\nimport { Entry } from \"../../models/models\";\nimport { ModalHeader } from \"./ModalHeader\";\nimport { handleKeyPress } from \"../../logic/logic\";\n\ninterface Props {\n  entry: Entry;\n  open: boolean;\n  setOpen: React.Dispatch<React.SetStateAction<boolean>>;\n}\n\nexport const RemoveEntryModal: React.FC<Props> = ({ entry, open, setOpen }) => {\n  const { sheetDispatch } = useContext(SheetContext);\n\n  function handleClose() {\n    setOpen(false);\n  }\n\n  function confirmRemoveEntry() {\n    sheetDispatch({\n      type: \"removeEntry\",\n      entryId: entry.id,\n    });\n\n    setOpen(false);\n  }\n\n  return (\n    <Dialog\n      fullWidth\n      disableBackdropClick\n      maxWidth='xs'\n      onClose={handleClose}\n      open={open}\n      onKeyPress={(e) => handleKeyPress(e, \"enter\", confirmRemoveEntry)}\n      PaperProps={{ className: \"modal\" }}\n    >\n      <ModalHeader title='Remove Entry' onClose={handleClose} />\n      <DialogContent>\n        Are you sure you want to remove <b>{entry.item}</b> from this sheet?\n      </DialogContent>\n      <DialogActions className='modalActions'>\n        <Button\n          className='modalConfirmButton rightMarginSmall'\n          onClick={confirmRemoveEntry}\n        >\n          Confirm\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n","import * as React from \"react\";\nimport Grid from \"@material-ui/core/Grid\";\nimport { useState } from \"react\";\nimport { Avatar, IconButton, Input, InputAdornment } from \"@material-ui/core\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport { Entry } from \"../../models/models\";\nimport NumberFormat from \"react-number-format\";\nimport { UserAvatar } from \"../bits/UserAvatar\";\nimport { ExcludedUsersModal } from \"../modals/ExcludedUsersModal\";\nimport EditRoundedIcon from \"@material-ui/icons/EditRounded\";\nimport { motion } from \"framer-motion\";\nimport { useContext } from \"react\";\nimport { SheetContext } from \"../pages/SplitTheCost\";\nimport { EntryUserModal } from \"../modals/EntryUserModal\";\nimport { RemoveEntryModal } from \"../modals/RemoveEntryModal\";\n\ninterface Props {\n  entry: Entry;\n  rowIdx: number;\n}\n\nexport const EntriesRow: React.FC<Props> = ({ entry, rowIdx }) => {\n  const { sheetState, sheetDispatch } = useContext(SheetContext);\n\n  const [emptyRow, setEmptyRow] = useState(\n    !entry.item && !entry.cost && !entry.note\n  );\n\n  const [showDelete, setShowDelete] = useState(false);\n  const [showEdit, setShowEdit] = useState(false);\n  const [item, setItem] = useState(entry.item);\n  const [note, setNote] = useState(entry.note);\n  const [showExcludeUsersModal, setShowExcludeUsersModal] = useState(false);\n  const [showEntryUserModal, setShowEntryUserModal] = useState(false);\n  const [showRemoveEntryModal, setShowRemoveEntryModal] = useState(false);\n\n  const numExcludeUsersDisplay = 3;\n\n  function updateEntry(\n    value: string,\n    section: \"item\" | \"cost\" | \"note\",\n    local?: boolean\n  ) {\n    switch (section) {\n      case \"item\":\n        sheetDispatch({\n          type: \"updateEntry\",\n          entry: entry,\n          section: \"item\",\n          value: value,\n        });\n        setEmptyRow(!item && !entry.cost && !note);\n        break;\n      case \"cost\":\n        sheetDispatch({\n          type: \"updateEntry\",\n          entry: entry,\n          section: \"cost\",\n          value: value,\n          local: local,\n        });\n        setEmptyRow(!item && !Number(value) && !note);\n        break;\n      case \"note\":\n        sheetDispatch({\n          type: \"updateEntry\",\n          entry: entry,\n          section: \"note\",\n          value: value,\n        });\n        setEmptyRow(!item && !entry.cost && !note);\n        break;\n    }\n  }\n\n  return (\n    <motion.div\n      animate={{ x: 0, opacity: 1 }}\n      initial={{ x: -2000, opacity: 0 }}\n      transition={{ type: \"tween\", duration: 0.5 }}\n    >\n      <Grid\n        className={rowIdx % 2 ? \"lightRow\" : \"darkRow\"}\n        container\n        spacing={0}\n      >\n        <Grid item xs={3}>\n          <div\n            className='entryDiv'\n            onMouseOver={() => setShowDelete(true)}\n            onMouseLeave={() => setShowDelete(false)}\n          >\n            <UserAvatar\n              className='leftMargin'\n              user={sheetState.users[entry.user]}\n              userIdx={Object.keys(sheetState.users).indexOf(\n                sheetState.users[entry.user].id\n              )}\n              tooltipPlacement='top'\n              disabled={emptyRow}\n              onClick={\n                !sheetState.readOnly\n                  ? () => setShowEntryUserModal(true)\n                  : undefined\n              }\n              iconOnHover={<EditRoundedIcon />}\n            />\n            <Input\n              className='sideMargins'\n              disableUnderline\n              fullWidth\n              readOnly={sheetState.readOnly}\n              value={item}\n              placeholder={emptyRow ? \"Enter item name here\" : undefined}\n              onFocus={() => setEmptyRow(false)}\n              onChange={(e) => setItem(e.target.value)}\n              onBlur={(e) => {\n                updateEntry(e.target.value, \"item\");\n              }}\n            />\n            {!sheetState.readOnly && showDelete && (\n              <IconButton\n                className='iconButton largeIconButton rightMargin'\n                onClick={() => setShowRemoveEntryModal(true)}\n              >\n                <DeleteIcon />\n              </IconButton>\n            )}\n          </div>\n        </Grid>\n        <Grid item xs={1}>\n          <div className='entryDiv'>\n            <Input\n              className='sideMargins'\n              disableUnderline\n              fullWidth\n              readOnly={sheetState.readOnly}\n              value={entry.cost.toFixed(2)}\n              onFocus={() => setEmptyRow(false)}\n              onChange={(e) => {\n                updateEntry(e.target.value, \"cost\", true);\n              }}\n              onBlur={(e) => {\n                updateEntry(e.target.value, \"cost\");\n              }}\n              startAdornment={\n                <InputAdornment position='start'>$</InputAdornment>\n              }\n              inputComponent={NumberFormat as any}\n              inputProps={{\n                decimalScale: 2,\n                allowNegative: false,\n                thousandSeparator: \",\",\n                allowLeadingZeros: true,\n              }}\n            />\n          </div>\n        </Grid>\n        <Grid item xs={2}>\n          <div\n            className='entryDiv'\n            onMouseOver={() => setShowEdit(true)}\n            onMouseLeave={() => setShowEdit(false)}\n          >\n            {entry.exclude.map((userId, idx) => {\n              if (idx < numExcludeUsersDisplay) {\n                return (\n                  <UserAvatar\n                    className='leftMarginSmall'\n                    user={sheetState.users[userId]}\n                    userIdx={Object.keys(sheetState.users).indexOf(\n                      sheetState.users[userId].id\n                    )}\n                    tooltipPlacement='top'\n                    key={userId}\n                  />\n                );\n              } else if (\n                idx === numExcludeUsersDisplay &&\n                entry.exclude.length > idx\n              ) {\n                return (\n                  <Avatar className='leftMarginSmall' key={userId}>{`+${\n                    entry.exclude.length - numExcludeUsersDisplay\n                  }`}</Avatar>\n                );\n              } else {\n                return null;\n              }\n            })}\n\n            {!sheetState.readOnly && showEdit && (\n              <IconButton\n                className='iconButton largeIconButton leftMarginSmall'\n                onClick={() => setShowExcludeUsersModal(true)}\n              >\n                <EditRoundedIcon />\n              </IconButton>\n            )}\n          </div>\n        </Grid>\n        <Grid item xs={6}>\n          <div className='entryDiv'>\n            <Input\n              className='sideMargins'\n              disableUnderline\n              fullWidth\n              readOnly={sheetState.readOnly}\n              value={note}\n              placeholder={emptyRow ? \"Include a note here\" : undefined}\n              onFocus={() => setEmptyRow(false)}\n              onChange={(e) => setNote(e.target.value)}\n              onBlur={(e) => {\n                updateEntry(e.target.value, \"note\");\n              }}\n            />\n          </div>\n        </Grid>\n      </Grid>\n      <ExcludedUsersModal\n        open={showExcludeUsersModal}\n        setOpen={setShowExcludeUsersModal}\n        entry={entry}\n      />\n      <EntryUserModal\n        open={showEntryUserModal}\n        setOpen={setShowEntryUserModal}\n        entry={entry}\n      />\n      <RemoveEntryModal\n        open={showRemoveEntryModal}\n        setOpen={setShowRemoveEntryModal}\n        entry={entry}\n      />\n    </motion.div>\n  );\n};\n","import { Grid } from \"@material-ui/core\";\nimport * as React from \"react\";\n\nexport const EntriesHeader: React.FC = () => {\n  return (\n    <Grid className='gridHeader' container spacing={0}>\n      <Grid item xs={3}>\n        <span className='leftMargin'>ITEM</span>\n      </Grid>\n      <Grid item xs={1}>\n        <span className='leftMargin'>COST</span>\n      </Grid>\n      <Grid item xs={2}>\n        <span className='leftMargin'>EXCLUDE</span>\n      </Grid>\n      <Grid item xs={6}>\n        <span className='leftMargin'>NOTE</span>\n      </Grid>\n    </Grid>\n  );\n};\n","import * as React from \"react\";\nimport { EntriesRow } from \"./EntriesRow\";\nimport { EntriesHeader } from \"./EntriesHeader\";\nimport { useContext } from \"react\";\nimport { SheetContext } from \"../pages/SplitTheCost\";\nimport { UserContext } from \"../../App\";\n\nexport const Entries: React.FC = () => {\n  const { userState } = useContext(UserContext);\n  const { sheetState } = useContext(SheetContext);\n  let rowIdx = 0;\n\n  return (\n    <div className='entries'>\n      <EntriesHeader />\n      {userState.authenticated &&\n        sheetState.entries.map(\n          (entry) =>\n            (entry.user === userState.curUser?.id ||\n              entry.createdBy === userState.curUser?.id ||\n              entry.item ||\n              entry.cost ||\n              entry.note) && (\n              <EntriesRow entry={entry} rowIdx={rowIdx++} key={entry.id} />\n            )\n        )}\n    </div>\n  );\n};\n","import * as React from \"react\";\nimport CloudDoneRoundedIcon from \"@material-ui/icons/CloudDoneRounded\";\nimport SyncRoundedIcon from \"@material-ui/icons/SyncRounded\";\nimport { SaveState } from \"../../models/models\";\n\ninterface Props {\n  saveState: SaveState;\n}\n\nexport const AutosaveMessage: React.FC<Props> = ({ saveState }) => {\n  function renderMessage(): JSX.Element {\n    if (saveState === SaveState.Unsaved) {\n      return <></>;\n    } else if (saveState === SaveState.Saving) {\n      return (\n        <>\n          <SyncRoundedIcon fontSize='small' />\n          <p className='leftMarginSmall'>Saving...</p>\n        </>\n      );\n    } else {\n      return (\n        <>\n          <CloudDoneRoundedIcon fontSize='small' />\n          <p className='leftMarginSmall'>Saved to Cloud</p>\n        </>\n      );\n    }\n  }\n\n  return <span id='autosaveMessage'>{renderMessage()}</span>;\n};\n","import * as React from \"react\";\nimport Grid from \"@material-ui/core/Grid\";\nimport { useContext } from \"react\";\nimport { SheetContext } from \"../pages/SplitTheCost\";\nimport { AutosaveMessage } from \"../bits/AutosaveMessage\";\nimport { SaveState } from \"../../models/models\";\n\ninterface Props {\n  saveState: SaveState;\n}\n\nexport const Header: React.FC<Props> = ({ saveState }) => {\n  const { sheetState } = useContext(SheetContext);\n\n  return (\n    <Grid container spacing={0}>\n      <Grid className='header' item xs={12}>\n        <span className='leftMargin'>\n          split the cost | <b>{sheetState.title}</b>\n        </span>\n        <AutosaveMessage saveState={saveState} />\n      </Grid>\n    </Grid>\n  );\n};\n","import * as React from \"react\";\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  TextField,\n} from \"@material-ui/core\";\nimport { useContext, useState } from \"react\";\nimport { SheetContext } from \"../pages/SplitTheCost\";\nimport { ModalHeader } from \"./ModalHeader\";\nimport { handleKeyPress, validateName } from \"../../logic/logic\";\n\ninterface Props {\n  open: boolean;\n  setOpen: React.Dispatch<React.SetStateAction<boolean>>;\n}\n\nexport const AddUserModal: React.FC<Props> = ({ open, setOpen }) => {\n  const { sheetState, sheetDispatch } = useContext(SheetContext);\n\n  const [firstName, setFirstName] = useState(\"\");\n  const [validFirstName, setValidFirstName] = useState(true);\n  const [lastName, setLastName] = useState(\"\");\n  const [validLastName, setValidLastName] = useState(true);\n  const [uniqueUser, setUniqueUser] = useState(true);\n\n  // Resets dialog inputs.\n  function resetDialog() {\n    setFirstName(\"\");\n    setLastName(\"\");\n    setValidFirstName(true);\n    setValidLastName(true);\n    setUniqueUser(true);\n  }\n\n  function handleClose() {\n    resetDialog();\n    setOpen(false);\n  }\n\n  function validateNewUser(firstName: string, lastName: string): boolean {\n    const first = firstName.trim().toLocaleLowerCase();\n    const last = lastName.trim().toLocaleLowerCase();\n\n    const checkFirstName = validateName(first);\n    const checkLastName = validateName(last);\n    setValidFirstName(checkFirstName);\n    setValidLastName(checkLastName);\n\n    if (!checkFirstName || !checkLastName) return false;\n\n    let unique = true;\n    Object.entries(sheetState.users).forEach((pair) => {\n      const user = pair[1];\n      if (\n        user.firstName.toLocaleLowerCase() === first &&\n        user.lastName.toLocaleLowerCase() === last\n      ) {\n        unique = false;\n      }\n    });\n\n    setUniqueUser(unique);\n    return unique;\n  }\n\n  function confirmAddUser() {\n    // Validate first/last name and check for duplicates.\n    if (sheetState.numUsers >= 10 || !validateNewUser(firstName, lastName)) {\n      return;\n    }\n\n    sheetDispatch({\n      type: \"addUser\",\n      firstName: firstName.trim(),\n      lastName: lastName.trim(),\n      email: \"\",\n    });\n\n    resetDialog();\n    setOpen(false);\n  }\n\n  return (\n    <Dialog\n      fullWidth\n      disableBackdropClick\n      maxWidth='xs'\n      onClose={handleClose}\n      open={open}\n      onKeyPress={(e) => handleKeyPress(e, \"enter\", confirmAddUser)}\n      PaperProps={{ className: \"modal\" }}\n    >\n      <ModalHeader title='Add a Friend' onClose={handleClose} />\n      <DialogContent>\n        <div className='modalInputRow'>\n          <TextField\n            className='halfWidthModalInput'\n            autoFocus\n            label='First Name'\n            value={firstName}\n            onChange={(e) => setFirstName(e.target.value)}\n            error={!validFirstName || !uniqueUser}\n            helperText={\n              (!validFirstName && \"Please enter a valid name.\") ||\n              (!uniqueUser && \"Duplicate users not allowed.\")\n            }\n          />\n          <TextField\n            className='halfWidthModalInput'\n            label='Last Name'\n            value={lastName}\n            onChange={(e) => setLastName(e.target.value)}\n            error={!validLastName || !uniqueUser}\n            helperText={\n              (!validLastName && \"Please enter a valid name.\") ||\n              (!uniqueUser && \"Duplicate users not allowed.\")\n            }\n          />\n        </div>\n      </DialogContent>\n      <DialogActions className='modalActions'>\n        <Button\n          className='modalConfirmButton rightMarginSmall'\n          onClick={confirmAddUser}\n        >\n          Confirm\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n","import firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\nimport { SheetState } from \"./models/models\";\n\nconst fire = firebase.initializeApp({\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\n  authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.REACT_APP_FIREBASE_APP_ID,\n});\n\nexport const sheetStateConverter = {\n  toFirestore(sheetState: SheetState): firebase.firestore.DocumentData {\n    return {\n      id: sheetState.id,\n      timestamp: sheetState.timestamp,\n      lastAccessed: sheetState.lastAccessed,\n      lastEdited: sheetState.lastEdited,\n      title: sheetState.title,\n      entries: sheetState.entries,\n      users: sheetState.users,\n      numUsers: sheetState.numUsers,\n      createdBy: sheetState.createdBy,\n      readOnly: sheetState.readOnly ? sheetState.readOnly : false,\n      customLink: sheetState.customLink ? sheetState.customLink : \"\",\n      password: sheetState.password ? sheetState.password : \"\",\n    };\n  },\n  fromFirestore(\n    snapshot: firebase.firestore.QueryDocumentSnapshot,\n    options: firebase.firestore.SnapshotOptions\n  ): SheetState {\n    const data = snapshot.data(options)!;\n    return {\n      id: data.id,\n      timestamp: data.timestamp,\n      lastAccessed: data.lastAccessed,\n      lastEdited: data.lastEdited,\n      title: data.title,\n      entries: data.entries,\n      users: data.users,\n      numUsers: data.numUsers,\n      createdBy: data.createdBy,\n      local: false,\n      readOnly: data.readOnly,\n      customLink: data.customLink,\n      password: data.password ? data.password : \"\",\n    };\n  },\n};\n\nexport const auth = fire.auth();\nexport const db = fire.firestore();\nexport const googleAuthProvider = new firebase.auth.GoogleAuthProvider();\nexport default fire;\n","import * as React from \"react\";\nimport {\n  Dialog,\n  DialogContent,\n  Grid,\n  TextField,\n  IconButton,\n  FormControlLabel,\n  Switch,\n  Tooltip,\n  Button,\n} from \"@material-ui/core\";\nimport { useContext, useEffect, useState } from \"react\";\nimport { SheetContext } from \"../pages/SplitTheCost\";\nimport { ModalHeader } from \"./ModalHeader\";\nimport { db } from \"../../firebase\";\nimport {\n  validateCustomSheetLink,\n  validatePassword,\n  validateSheetTitle,\n} from \"../../logic/logic\";\nimport { useHistory } from \"react-router-dom\";\nimport DeleteIcon from \"@material-ui/icons/DeleteRounded\";\nimport EditRoundedIcon from \"@material-ui/icons/EditRounded\";\nimport DoneRoundedIcon from \"@material-ui/icons/DoneRounded\";\nimport CloseRoundedIcon from \"@material-ui/icons/CloseRounded\";\nimport VisibilityIcon from \"@material-ui/icons/Visibility\";\nimport VisibilityOffIcon from \"@material-ui/icons/VisibilityOff\";\nimport FilterNoneRoundedIcon from \"@material-ui/icons/FilterNoneRounded\";\n\ninterface Props {\n  open: boolean;\n  setOpen: React.Dispatch<React.SetStateAction<boolean>>;\n}\n\nexport const SettingsModal: React.FC<Props> = ({ open, setOpen }) => {\n  const { sheetState, sheetDispatch } = useContext(SheetContext);\n  const history = useHistory();\n\n  // Sheet title state\n  const [sheetTitle, setSheetTitle] = useState(sheetState.title);\n  const [editTitle, setEditTitle] = useState(false);\n  const [validTitle, setValidTitle] = useState(true);\n\n  // Custom sheet link state\n  const [sheetLink, setSheetLink] = useState(\n    sheetState.customLink ? sheetState.customLink : sheetState.id\n  );\n  const [editLink, setEditLink] = useState(false);\n  const [validLink, setValidLink] = useState(true);\n  const [uniqueLink, setUniqueLink] = useState(true);\n\n  // Read only state\n  const [readOnly, setReadOnly] = useState(sheetState.readOnly);\n\n  // Sheet password state\n  const [password, setPassword] = useState(\"\");\n  const [editPassword, setEditPassword] = useState(false);\n  const [validPassword, setValidPassword] = useState(true);\n  const [viewPassword, setViewPassword] = useState(false);\n\n  const [password2, setPassword2] = useState(\"\");\n  const [passwordsMatch, setPasswordsMatch] = useState(true);\n\n  // Delete sheet state\n  const [deleteText, setDeleteText] = useState(\"\");\n  const [editDelete, setEditDelete] = useState(false);\n  const [deleteError, setDeleteError] = useState(false);\n\n  useEffect(() => {\n    setSheetTitle(sheetState.title);\n    setSheetLink(sheetState.customLink ? sheetState.customLink : sheetState.id);\n    setReadOnly(sheetState.readOnly);\n  }, [\n    sheetState.title,\n    sheetState.customLink,\n    sheetState.id,\n    sheetState.readOnly,\n  ]);\n\n  function handleClose() {\n    setOpen(false);\n    cancelSheetTitle();\n    cancelCustomLink();\n    cancelPassword();\n    cancelDeleteSheet();\n  }\n\n  // ----------------- SHEET TITLE -----------------\n\n  function renderSheetTitleSetting(): JSX.Element {\n    return (\n      <>\n        <Grid className='bottomMargin' item xs={8}>\n          <TextField\n            fullWidth\n            inputRef={(titleRef) => titleRef && editTitle && titleRef.focus()}\n            value={sheetTitle}\n            error={!validTitle}\n            label='Sheet Title'\n            onChange={(e) => setSheetTitle(e.target.value)}\n            helperText={\n              validTitle\n                ? \"\"\n                : \"Title must be between 3-40 characters (select special characters are allowed).\"\n            }\n            InputProps={{\n              readOnly: !editTitle,\n              disableUnderline: !editTitle,\n            }}\n          />\n        </Grid>\n        <Grid container item xs={4} justify='flex-end'>\n          {editTitle && (\n            <IconButton onClick={cancelSheetTitle}>\n              <CloseRoundedIcon />\n            </IconButton>\n          )}\n          <IconButton onClick={handleEditSheetTitle}>\n            {editTitle ? <DoneRoundedIcon /> : <EditRoundedIcon />}\n          </IconButton>\n        </Grid>\n      </>\n    );\n  }\n\n  function handleEditSheetTitle() {\n    if (!editTitle) {\n      setEditTitle(true);\n    } else {\n      confirmSheetTitle();\n    }\n  }\n\n  function confirmSheetTitle() {\n    if (sheetTitle.trim() === sheetState.title) {\n      cancelSheetTitle();\n      return;\n    }\n\n    if (!validateSheetTitle(sheetTitle.trim())) {\n      setValidTitle(false);\n      return;\n    }\n\n    setEditTitle(false);\n    setValidTitle(true);\n    sheetDispatch({ type: \"changeSheetTitle\", title: sheetTitle.trim() });\n  }\n\n  function cancelSheetTitle() {\n    setEditTitle(false);\n    setValidTitle(true);\n    setSheetTitle(sheetState.title);\n  }\n\n  // ----------------- CUSTOM SHEET LINK -----------------\n\n  function renderCustomLinkSetting(): JSX.Element {\n    return (\n      <>\n        <Grid className='bottomMargin' item xs={8}>\n          <TextField\n            fullWidth\n            inputRef={(linkRef) => linkRef && editLink && linkRef.focus()}\n            value={sheetLink}\n            error={!validLink || !uniqueLink}\n            label='Custom Sheet Link'\n            onChange={(e) => setSheetLink(e.target.value)}\n            helperText={\n              validLink\n                ? uniqueLink\n                  ? \"\"\n                  : \"This custom link is already in use.\"\n                : \"Link must be between 5-20 characters and contain only letters and numbers.\"\n            }\n            InputProps={{\n              readOnly: !editLink,\n              disableUnderline: !editLink,\n              startAdornment: <b>splitthecost.net/#/</b>,\n            }}\n          />\n        </Grid>\n        <Grid container item xs={4} justify='flex-end'>\n          <Tooltip arrow title='Copy Link' placement='left'>\n            <IconButton onClick={copySheetLink}>\n              <FilterNoneRoundedIcon />\n            </IconButton>\n          </Tooltip>\n          {editLink && (\n            <IconButton onClick={cancelCustomLink}>\n              <CloseRoundedIcon />\n            </IconButton>\n          )}\n          <IconButton onClick={handleEditCustomLink}>\n            {editLink ? <DoneRoundedIcon /> : <EditRoundedIcon />}\n          </IconButton>\n        </Grid>\n      </>\n    );\n  }\n\n  function handleEditCustomLink() {\n    if (!editLink) {\n      setEditLink(true);\n    } else {\n      confirmCustomLink();\n    }\n  }\n\n  async function confirmCustomLink() {\n    const linkTrimmed = sheetLink.trim();\n    if (\n      linkTrimmed === sheetState.customLink ||\n      linkTrimmed === sheetState.id\n    ) {\n      cancelCustomLink();\n      return;\n    }\n\n    const temp = validateCustomSheetLink(linkTrimmed);\n    setValidLink(temp);\n    if (!temp) {\n      return;\n    }\n\n    const linkSnapshot = await db\n      .collection(\"customLinks\")\n      .doc(linkTrimmed)\n      .get();\n    if (linkSnapshot.exists) {\n      setUniqueLink(false);\n      return;\n    }\n\n    const idSnapshot = await db.collection(\"sheets\").doc(linkTrimmed).get();\n    if (idSnapshot.exists) {\n      setUniqueLink(false);\n      return;\n    }\n\n    setEditLink(false);\n    setValidLink(true);\n    setUniqueLink(true);\n    sheetDispatch({ type: \"changeSheetLink\", link: linkTrimmed });\n    history.push(`/sheet/${sheetLink}`);\n  }\n\n  function cancelCustomLink() {\n    setEditLink(false);\n    setValidLink(true);\n    setUniqueLink(true);\n    setSheetLink(sheetState.customLink ? sheetState.customLink : sheetState.id);\n  }\n\n  function copySheetLink() {\n    navigator.clipboard.writeText(\n      `splitthecost.net/#/sheet/${\n        sheetState.customLink ? sheetState.customLink : sheetState.id\n      }`\n    );\n  }\n\n  // ----------------- TOGGLES -----------------\n\n  function renderToggleSettings(): JSX.Element {\n    return (\n      <Grid item xs={12}>\n        <FormControlLabel\n          control={\n            <Switch\n              checked={readOnly}\n              onChange={handleEditReadOnly}\n              color='primary'\n            />\n          }\n          label='Read Only'\n        />\n      </Grid>\n    );\n  }\n\n  function handleEditReadOnly(e: React.ChangeEvent<HTMLInputElement>) {\n    sheetDispatch({ type: \"updateReadOnly\", readOnly: e.target.checked });\n  }\n\n  // ----------------- SHEET PASSWORD -----------------\n\n  function renderPasswordSetting(): JSX.Element {\n    return (\n      <>\n        <Grid className='bottomMargin' item xs={8}>\n          <TextField\n            fullWidth\n            value={password}\n            error={!validPassword}\n            label='Sheet Password'\n            placeholder='Enter new sheet password here'\n            onChange={(e) => setPassword(e.target.value)}\n            helperText={\n              validPassword\n                ? \"\"\n                : \"Password must be between 5-25 characters and can only contain these special characters (!, @, #, $, %).\"\n            }\n            InputProps={{\n              readOnly: !editPassword,\n              disableUnderline: !editPassword,\n              type: viewPassword ? \"default\" : \"password\",\n            }}\n          />\n        </Grid>\n        <Grid container item xs={4} justify='flex-end'>\n        {editPassword && (\n          <Tooltip\n            arrow\n            title={viewPassword ? \"Hide Password\" : \"View Password\"}\n            placement='left'\n          >\n            <IconButton onClick={() => setViewPassword(!viewPassword)}>\n              {viewPassword ? <VisibilityOffIcon /> : <VisibilityIcon />}\n            </IconButton>\n          </Tooltip>\n        )}\n          {editPassword && (\n            <IconButton onClick={cancelPassword}>\n              <CloseRoundedIcon />\n            </IconButton>\n          )}\n          <IconButton onClick={handleEditPassword}>\n            {editPassword ? <DoneRoundedIcon /> : <EditRoundedIcon />}\n          </IconButton>\n        </Grid>\n\n        {editPassword && (\n          <>\n            <Grid className='bottomMargin' item xs={8}>\n              <TextField\n                fullWidth\n                value={password2}\n                error={!passwordsMatch}\n                placeholder='Confirm Password'\n                onChange={(e) => setPassword2(e.target.value)}\n                helperText={passwordsMatch ? \"\" : \"Passwords don't match.\"}\n                InputProps={{\n                  readOnly: !editPassword,\n                  disableUnderline: !editPassword,\n                  type: viewPassword ? \"default\" : \"password\",\n                }}\n              />\n            </Grid>\n            <Grid\n              className='bottomMargin'\n              container\n              item\n              xs={4}\n              justify='flex-end'\n            >\n              <Button color='secondary' onClick={removePassword}>\n                REMOVE PASSWORD\n              </Button>\n            </Grid>\n          </>\n        )}\n      </>\n    );\n  }\n\n  function handleEditPassword() {\n    if (!editPassword) {\n      setEditPassword(true);\n    } else {\n      confirmPassword();\n    }\n  }\n\n  function confirmPassword() {\n    if (!password) {\n      cancelPassword();\n      return;\n    }\n\n    setValidPassword(validatePassword(password));\n    if (!validatePassword(password)) return;\n\n    setPasswordsMatch(password === password2);\n    if (password !== password2) return;\n\n    sheetDispatch({ type: \"updateSheetPassword\", password: password });\n    cancelPassword();\n  }\n\n  function cancelPassword() {\n    setEditPassword(false);\n    setPasswordsMatch(true);\n    setValidPassword(true);\n    setPassword(\"\");\n    setPassword2(\"\");\n  }\n\n  function removePassword() {\n    if (sheetState.password) {\n      sheetDispatch({ type: \"removeSheetPassword\" });\n    }\n    cancelPassword();\n  }\n\n  // ----------------- DELETE SHEET -----------------\n\n  function renderDeleteSheetSetting(): JSX.Element {\n    return (\n      <>\n        <Grid className='bottomMargin' item xs={8}>\n          <TextField\n            fullWidth\n            inputRef={(deleteRef) =>\n              deleteRef && editDelete && deleteRef.focus()\n            }\n            value={deleteText}\n            placeholder='Enter sheet name to confirm deletion.'\n            error={deleteError}\n            label='Delete Sheet'\n            onChange={(e) => setDeleteText(e.target.value)}\n            helperText={\n              deleteError\n                ? `Please enter the sheet name correctly (${sheetState.title})`\n                : \"\"\n            }\n            InputProps={{\n              readOnly: !editDelete,\n              disableUnderline: !editDelete,\n            }}\n          />\n        </Grid>\n        <Grid container item xs={4} justify='flex-end'>\n          {editDelete && (\n            <IconButton onClick={cancelDeleteSheet}>\n              <CloseRoundedIcon />\n            </IconButton>\n          )}\n          <IconButton onClick={handleDeleteSheet}>\n            {editDelete ? <DoneRoundedIcon /> : <DeleteIcon />}\n          </IconButton>\n        </Grid>\n      </>\n    );\n  }\n\n  function handleDeleteSheet() {\n    if (!editDelete) {\n      setEditDelete(true);\n    } else {\n      confirmDeleteSheet();\n    }\n  }\n\n  async function confirmDeleteSheet() {\n    if (!deleteText.trim()) {\n      cancelDeleteSheet();\n      return;\n    }\n\n    if (deleteText !== sheetState.title) {\n      setDeleteError(true);\n      return;\n    }\n\n    sheetDispatch({ type: \"deleteSheet\" });\n    history.push(\"/\");\n    cancelDeleteSheet();\n  }\n\n  function cancelDeleteSheet() {\n    setDeleteError(false);\n    setEditDelete(false);\n    setDeleteText(\"\");\n  }\n\n  return (\n    <Dialog\n      fullWidth\n      disableBackdropClick\n      maxWidth='sm'\n      onClose={handleClose}\n      open={open}\n      PaperProps={{ className: \"modal\" }}\n    >\n      <ModalHeader title='Settings' onClose={handleClose} />\n      <DialogContent className='modalContent'>\n        <Grid container spacing={0} alignItems='center'>\n          {renderSheetTitleSetting()}\n          {!sheetState.local && renderCustomLinkSetting()}\n          {renderToggleSettings()}\n          {!sheetState.local && renderPasswordSetting()}\n          {!sheetState.local && renderDeleteSheetSetting()}\n        </Grid>\n      </DialogContent>\n    </Dialog>\n  );\n};\n","import * as React from \"react\";\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n} from \"@material-ui/core\";\nimport { useContext } from \"react\";\nimport { SheetContext } from \"../pages/SplitTheCost\";\nimport { User } from \"../../models/models\";\nimport { ModalHeader } from \"./ModalHeader\";\nimport { handleKeyPress } from \"../../logic/logic\";\n\ninterface Props {\n  removeUser: User;\n  open: boolean;\n  setOpen: React.Dispatch<React.SetStateAction<boolean>>;\n}\n\nexport const RemoveUserModal: React.FC<Props> = ({\n  removeUser,\n  open,\n  setOpen,\n}) => {\n  const { sheetState, sheetDispatch } = useContext(SheetContext);\n\n  function handleClose() {\n    setOpen(false);\n  }\n\n  function confirmRemoveUser() {\n    if (removeUser.id !== sheetState.createdBy) {\n      sheetDispatch({\n        type: \"removeUser\",\n        userId: removeUser.id,\n      });\n    }\n\n    setOpen(false);\n  }\n\n  return (\n    <Dialog\n      fullWidth\n      disableBackdropClick\n      maxWidth='xs'\n      onClose={handleClose}\n      open={open}\n      onKeyPress={(e) => handleKeyPress(e, \"enter\", confirmRemoveUser)}\n      PaperProps={{ className: \"modal\" }}\n    >\n      <ModalHeader title='Remove Friend' onClose={handleClose} />\n      <DialogContent>\n        Are you sure you want to remove <b>{removeUser.displayName}</b> and all\n        associated entries from this sheet?\n      </DialogContent>\n      <DialogActions className='modalActions'>\n        <Button\n          className='modalConfirmButton rightMarginSmall'\n          onClick={confirmRemoveUser}\n        >\n          Confirm\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n","import * as React from \"react\";\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  Grid,\n} from \"@material-ui/core\";\nimport { useContext, useEffect, useState } from \"react\";\n// import NumberFormat from \"react-number-format\";\nimport { SheetContext } from \"../pages/SplitTheCost\";\nimport { useHistory } from \"react-router-dom\";\nimport { ModalHeader } from \"./ModalHeader\";\n\ninterface Props {\n  open: boolean;\n  setOpen: React.Dispatch<React.SetStateAction<boolean>>;\n}\n\nexport const SaveSheetModal: React.FC<Props> = ({ open, setOpen }) => {\n  const { sheetState, sheetDispatch } = useContext(SheetContext);\n\n  const history = useHistory();\n\n  const [buttonText, setButtonText] = useState(\"\");\n\n  useEffect(() => {\n    setButtonText(sheetState.local ? \"SAVE\" : \"SAVED\");\n  }, [sheetState.local]);\n\n  function handleClose() {\n    setOpen(false);\n  }\n\n  async function confirmSaveSheet() {\n    if (sheetState.local) {\n      setButtonText(\"SAVING\");\n      await new Promise((r) => setTimeout(r, 500));\n      sheetDispatch({ type: \"saveSheet\" });\n      history.push(`/sheet/${sheetState.id}`);\n    }\n  }\n\n  return (\n    <Dialog\n      fullWidth\n      disableBackdropClick\n      maxWidth='xs'\n      onClose={handleClose}\n      open={open}\n      PaperProps={{ className: \"modal\" }}\n    >\n      <ModalHeader title='Save Sheet' onClose={handleClose} />\n      <DialogContent className='modalContent bottomMargin'>\n        <Grid container spacing={0} alignItems='center'>\n          Would you like to save this sheet to the cloud for future access?\n        </Grid>\n      </DialogContent>\n      <DialogActions className='modalActions'>\n        <Button\n          className='modalConfirmButton rightMarginSmall'\n          disabled={!sheetState.local}\n          onClick={confirmSaveSheet}\n        >\n          {buttonText}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n","import * as React from \"react\";\nimport { Grid, IconButton, Tooltip } from \"@material-ui/core\";\nimport { AddUserModal } from \"../modals/AddUserModal\";\nimport { useState } from \"react\";\nimport { SettingsModal } from \"../modals/SettingsModal\";\nimport { useContext } from \"react\";\nimport { UserContext } from \"../../App\";\nimport { SheetContext } from \"../pages/SplitTheCost\";\nimport { UserChip } from \"../bits/UserChip\";\nimport { RemoveUserModal } from \"../modals/RemoveUserModal\";\nimport { User } from \"../../models/models\";\nimport { SaveSheetModal } from \"../modals/SaveSheetModal\";\nimport AddRoundedIcon from \"@material-ui/icons/AddRounded\";\nimport SettingsRoundedIcon from \"@material-ui/icons/SettingsRounded\";\nimport SaveRoundedIcon from \"@material-ui/icons/SaveRounded\";\nimport PersonRoundedIcon from '@material-ui/icons/PersonRounded';\nimport Brightness4RoundedIcon from '@material-ui/icons/Brightness4Rounded';\n\nexport const UsersBar: React.FC = () => {\n  const { userState, userDispatch } = useContext(UserContext);\n  const { sheetState } = useContext(SheetContext);\n\n  const [openAddUser, setOpenAddUser] = useState(false);\n  const [openRemoveUser, setOpenRemoveUser] = useState(false);\n  const [openSettings, setOpenSettings] = useState(false);\n  const [openSaveSheet, setOpenSaveSheet] = useState(false);\n\n  const [removeUser, setRemoveUser] = useState<User>();\n\n  function openSettingsModal() {\n    setOpenSettings(true);\n  }\n\n  function openAddUserModal() {\n    setOpenAddUser(true);\n  }\n\n  function openRemoveUserModal(user: User) {\n    setRemoveUser(user);\n    setOpenRemoveUser(true);\n  }\n\n  function openSaveSheetModal() {\n    setOpenSaveSheet(true);\n  }\n\n  function changeUser() {\n    userDispatch({ type: \"removeCurUser\" })\n  }\n\n  function renderUsers(): JSX.Element {\n    return (\n      <>\n        {userState.curUser && (\n          <UserChip\n            className='leftMargin bottomMargin'\n            user={userState.curUser}\n            userIdx={Object.keys(sheetState.users).indexOf(\n              userState.curUser.id\n            )}\n          />\n        )}\n        {Object.entries(sheetState.users).map((pair) => {\n          const user = pair[1];\n          return (\n            (!userState.curUser || user.id !== userState.curUser.id) && (\n              <UserChip\n                className='leftMargin bottomMargin'\n                user={user}\n                userIdx={Object.keys(sheetState.users).indexOf(user.id)}\n                onRemove={\n                  !sheetState.readOnly &&\n                  userState.curUser &&\n                  sheetState.createdBy !== user.id\n                    ? openRemoveUserModal\n                    : undefined\n                }\n                key={user.id}\n              />\n            )\n          );\n        })}\n        {!sheetState.readOnly &&\n          userState.curUser &&\n          Object.keys(sheetState.users).length < 10 && (\n            <Tooltip arrow title='Add Friend' placement='right'>\n              <IconButton\n                className='iconButton smallIconButton leftMargin bottomMargin'\n                onClick={openAddUserModal}\n              >\n                <AddRoundedIcon />\n              </IconButton>\n            </Tooltip>\n          )}\n      </>\n    );\n  }\n\n  return (\n    <>\n      <Grid className='usersBar' container spacing={0}>\n        <Grid item container xs={11} alignItems='center'>\n          {userState.curUser && (\n            <Tooltip arrow title='Change User' placement='right'>\n              <IconButton\n                className='iconButton smallIconButton leftMargin bottomMargin'\n                onClick={changeUser}\n              >\n                <PersonRoundedIcon />\n              </IconButton>\n            </Tooltip>\n          )}\n          {userState.authenticated && renderUsers()}\n        </Grid>\n        <Grid item container xs={1} justify='flex-end' alignItems='center'>\n            <Tooltip arrow title='Toggle Dark Mode' placement='left'>\n              <IconButton\n                className='iconButton smallIconButton rightMargin bottomMargin'\n                onClick={() => userDispatch({ type: \"setDarkMode\", darkMode: !userState.darkMode })}\n              >\n                <Brightness4RoundedIcon />\n              </IconButton>\n            </Tooltip>\n          {sheetState.local && (\n            <Tooltip arrow title='Save Sheet' placement='left'>\n              <IconButton\n                className='iconButton smallIconButton rightMargin bottomMargin'\n                onClick={openSaveSheetModal}\n              >\n                <SaveRoundedIcon />\n              </IconButton>\n            </Tooltip>\n          )}\n          {userState.curUser?.id === sheetState.createdBy && (\n            <Tooltip arrow title='Settings' placement='left'>\n              <IconButton\n                className='iconButton smallIconButton rightMargin bottomMargin'\n                onClick={openSettingsModal}\n              >\n                <SettingsRoundedIcon />\n              </IconButton>\n            </Tooltip>\n          )}\n        </Grid>\n      </Grid>\n      <AddUserModal open={openAddUser} setOpen={setOpenAddUser} />\n      <SettingsModal open={openSettings} setOpen={setOpenSettings} />\n      {removeUser && (\n        <RemoveUserModal\n          removeUser={removeUser}\n          open={openRemoveUser}\n          setOpen={setOpenRemoveUser}\n        />\n      )}\n      <SaveSheetModal open={openSaveSheet} setOpen={setOpenSaveSheet} />\n    </>\n  );\n};\n","import { Grid } from \"@material-ui/core\";\nimport * as React from \"react\";\n\nexport const OverviewHeader: React.FC = () => {\n  return (\n    <Grid className='gridHeader roundedTop' container spacing={0}>\n      <Grid item xs={2}></Grid>\n      <Grid item xs={5}>\n        <span className='leftMargin'>TOTAL SPENT</span>\n      </Grid>\n      <Grid item xs={5}>\n        <span className='leftMargin'>TOTAL OWED</span>\n      </Grid>\n    </Grid>\n  );\n};\n","import { Grid, Input, InputAdornment } from \"@material-ui/core\";\nimport * as React from \"react\";\n// import NumberFormat from \"react-number-format\";\nimport { User } from \"../../../models/models\";\nimport { UserAvatar } from \"../../bits/UserAvatar\";\nimport { SheetContext } from \"../../pages/SplitTheCost\";\nimport { useContext } from \"react\";\n\ninterface Props {\n  user: User;\n  data: { totalSpent: number; totalOwed: number };\n  idx: number;\n}\n\nexport const OverviewRow: React.FC<Props> = ({ user, data, idx }) => {\n  const { sheetState } = useContext(SheetContext);\n\n  return (\n    <Grid\n      className={`${idx % 2 ? \"lightRow\" : \"darkRow\"} ${\n        idx === sheetState.numUsers - 1 && \"roundedBottom\"\n      }`}\n      container\n      spacing={0}\n    >\n      <Grid className='sideDialogRow' item xs={2}>\n        <UserAvatar\n          className='leftMargin'\n          user={user}\n          userIdx={Object.keys(sheetState.users).indexOf(user.id)}\n          tooltipPlacement='left'\n        />\n      </Grid>\n      <Grid className='sideDialogRow' item xs={5}>\n        <Input\n          className='sideMargins'\n          readOnly\n          disableUnderline\n          fullWidth\n          // inputComponent={NumberFormat as any}\n          // inputProps={{\n          //   decimalScale: 2,\n          //   allowNegative: false,\n          //   thousandSeparator: \",\",\n          // }}\n          value={data ? data?.totalSpent.toFixed(2) : 0}\n          startAdornment={<InputAdornment position='start'>$</InputAdornment>}\n        />\n      </Grid>\n      <Grid className='sideDialogRow' item xs={5}>\n        <>\n          <Input\n            readOnly\n            disableUnderline\n            fullWidth\n            // inputComponent={NumberFormat as any}\n            // inputProps={{\n            //   decimalScale: 2,\n            //   allowNegative: false,\n            //   thousandSeparator: \",\",\n            // }}\n            className='sideMargins'\n            value={data ? data?.totalOwed.toFixed(2) : 0}\n            startAdornment={<InputAdornment position='start'>$</InputAdornment>}\n          />\n        </>\n      </Grid>\n    </Grid>\n  );\n};\n","import * as React from \"react\";\nimport { useEffect, useState, useContext } from \"react\";\nimport { OverviewData } from \"../../../models/models\";\nimport { OverviewHeader } from \"./OverviewHeader\";\nimport { OverviewRow } from \"./OverviewRow\";\nimport { calculateOverview } from \"../../../logic/logic\";\nimport { SheetContext } from \"../../pages/SplitTheCost\";\nimport { UserContext } from \"../../../App\";\n\nexport const Overview: React.FC = () => {\n  const { sheetState } = useContext(SheetContext);\n  const { userState } = useContext(UserContext);\n\n  const [overviewData, setOverviewData] = useState<OverviewData>({});\n  let rowIdx = 0;\n\n  useEffect(() => {\n    setOverviewData(calculateOverview(sheetState.entries, sheetState.users));\n  }, [sheetState]);\n\n  return (\n    <>\n      <OverviewHeader />\n      {userState.curUser && (\n        <OverviewRow\n          user={userState.curUser}\n          data={overviewData[userState.curUser.id]}\n          idx={rowIdx++}\n        />\n      )}\n      {Object.entries(sheetState.users).map((pair) => {\n        let user = pair[1];\n        return (\n          user.id !== userState.curUser?.id && (\n            <OverviewRow\n              user={user}\n              data={overviewData[user.id]}\n              idx={rowIdx++}\n              key={user.id}\n            />\n          )\n        );\n      })}\n    </>\n  );\n};\n","import { Grid } from \"@material-ui/core\";\nimport * as React from \"react\";\n\nexport const BreakdownHeader: React.FC = () => {\n  return (\n    <Grid className='gridHeader roundedTop' container spacing={0}>\n      <Grid item xs={8}>\n        <span className='leftMargin'>TRANSACTIONS</span>\n      </Grid>\n      <Grid item xs={4}>\n        <span className='leftMargin'>TOTAL</span>\n      </Grid>\n    </Grid>\n  );\n};\n","import { Grid, Input, InputAdornment } from \"@material-ui/core\";\nimport * as React from \"react\";\nimport { useContext } from \"react\";\nimport NumberFormat from \"react-number-format\";\nimport { UserContext } from \"../../../App\";\nimport { User } from \"../../../models/models\";\nimport { SheetContext } from \"../../pages/SplitTheCost\";\nimport { UserAvatar } from \"../../bits/UserAvatar\";\n\ninterface Props {\n  user: User;\n  data?: { theyOwe: number; youOwe: number };\n  idx: number;\n}\n\nexport const BreakdownRow: React.FC<Props> = ({ user, data, idx }) => {\n  const { sheetState } = useContext(SheetContext);\n  const { userState } = useContext(UserContext);\n\n  const netCost = data ? data.theyOwe - data.youOwe : 0;\n  const debtedUser = netCost < 0 ? userState.curUser! : user;\n  const owedUser = netCost < 0 ? user : userState.curUser!;\n\n  return (\n    <Grid\n      className={`${idx % 2 ? \"lightRow\" : \"darkRow\"} ${\n        idx === sheetState.numUsers - 2 && \"roundedBottom\"\n      }`}\n      container\n      spacing={0}\n    >\n      <Grid className='sideDialogRow' item xs={2}>\n        <UserAvatar\n          className='leftMargin'\n          user={debtedUser}\n          userIdx={Object.keys(sheetState.users).indexOf(debtedUser.id)}\n          tooltipPlacement='left'\n        />\n      </Grid>\n      <Grid className='sideDialogRow' item xs={4}>\n        {netCost === 0 ? (\n          <div className='leftMargin evenArrow'>\n            <span>EVEN</span>\n          </div>\n        ) : (\n          <div className={`arrow ${netCost < 0 ? \"redArrow\" : \"greenArrow\"}`}>\n            <span className='leftMarginSmall'>\n              {netCost < 0 ? \"YOU OWE\" : \"OWES YOU\"}\n            </span>\n          </div>\n        )}\n      </Grid>\n      <Grid className='sideDialogRow' item xs={2}>\n        <UserAvatar\n          user={owedUser}\n          userIdx={Object.keys(sheetState.users).indexOf(owedUser.id)}\n          tooltipPlacement='top'\n        />\n      </Grid>\n      <Grid className='sideDialogRow' item xs={4}>\n        <Input\n          className='sideMargins'\n          readOnly\n          disableUnderline\n          fullWidth\n          inputComponent={NumberFormat as any}\n          inputProps={{\n            decimalScale: 2,\n            allowNegative: false,\n            thousandSeparator: \",\",\n          }}\n          value={Math.abs(netCost).toFixed(2)}\n          startAdornment={<InputAdornment position='start'>$</InputAdornment>}\n        />\n      </Grid>\n    </Grid>\n  );\n};\n","import * as React from \"react\";\nimport { useEffect, useState, useContext } from \"react\";\nimport { UserBreakdownData } from \"../../../models/models\";\nimport { BreakdownHeader } from \"./BreakdownHeader\";\nimport { BreakdownRow } from \"./BreakdownRow\";\nimport { UserContext } from \"../../../App\";\nimport { SheetContext } from \"../../pages/SplitTheCost\";\nimport { calculateUserBreakdown } from \"../../../logic/logic\";\n\nexport const Breakdown: React.FC = () => {\n  const { sheetState } = useContext(SheetContext);\n  const { userState } = useContext(UserContext);\n\n  const [breakdownData, setBreakdownData] = useState<UserBreakdownData>();\n  let rowIdx = 0;\n\n  useEffect(() => {\n    if (userState.curUser) {\n      setBreakdownData(\n        calculateUserBreakdown(\n          userState.curUser,\n          sheetState.entries,\n          sheetState.users\n        )\n      );\n    }\n  }, [userState.curUser, sheetState]);\n\n  return !userState.curUser || !breakdownData || sheetState.numUsers < 2 ? (\n    <div className='noBreakdownData'>No data to break down. &#129396;</div>\n  ) : (\n    <>\n      <BreakdownHeader />\n      {Object.entries(sheetState.users).map((pair) => {\n        let user = pair[1];\n        return (\n          user.id !== userState.curUser!.id && (\n            <BreakdownRow\n              user={user}\n              data={breakdownData.userBreakdown[user.id]}\n              idx={rowIdx++}\n              key={user.id}\n            />\n          )\n        );\n      })}\n    </>\n  );\n};\n","import React from \"react\";\nimport { Overview } from \"./overview/Overview\";\nimport ArrowBackRoundedIcon from \"@material-ui/icons/ArrowBackRounded\";\nimport ArrowForwardRoundedIcon from \"@material-ui/icons/ArrowForwardRounded\";\nimport { Fab, Tabs, Tab } from \"@material-ui/core\";\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport { Breakdown } from \"./breakdown/Breakdown\";\nimport { TabContext, TabPanel } from \"@material-ui/lab\";\nimport { useState } from \"react\";\n\nexport const SideDialog: React.FC = () => {\n  const [open, setOpen] = useState(true);\n  const [tab, setTab] = useState(\"ov\");\n\n  function handleOpen() {\n    setOpen(!open);\n  }\n\n  function handleChange(event: React.ChangeEvent<{}>, value: string) {\n    setTab(value);\n  }\n\n  return (\n    <>\n      <AnimatePresence>\n        {open && (\n          <motion.div\n            className='sideDialog'\n            animate={{ x: 0, opacity: 1 }}\n            initial={{ x: 600, opacity: 0 }}\n            exit={{ x: 600, opacity: 0 }}\n            transition={{ duration: 0.3 }}\n          >\n            <TabContext value={tab}>\n              <Tabs\n                value={tab}\n                onChange={handleChange}\n                indicatorColor='primary'\n                textColor='primary'\n              >\n                <Tab className='sideDialogTab' value='ov' label='OVERVIEW' />\n                <Tab className='sideDialogTab' value='bd' label='BREAKDOWN' />\n              </Tabs>\n              <motion.div\n                animate={tab === \"ov\" ? { opacity: 1 } : { opacity: 0 }}\n                transition={{ duration: 0.7 }}\n              >\n                <TabPanel className='sideDialogContent' value={\"ov\"}>\n                  <Overview />\n                </TabPanel>\n              </motion.div>\n              <motion.div\n                animate={tab === \"bd\" ? { opacity: 1 } : { opacity: 0 }}\n                transition={{ duration: 0.7 }}\n              >\n                <TabPanel className='sideDialogContent' value={\"bd\"}>\n                  <Breakdown />\n                </TabPanel>\n              </motion.div>\n            </TabContext>\n          </motion.div>\n        )}\n      </AnimatePresence>\n      <motion.div\n        className='sideDialogFab'\n        animate={open ? { x: -440 } : { x: 0 }}\n        transition={{ duration: 0.3 }}\n      >\n        <Fab variant='extended' size='medium' onClick={handleOpen}>\n          {open ? <ArrowForwardRoundedIcon /> : <ArrowBackRoundedIcon />}\n        </Fab>\n      </motion.div>\n    </>\n  );\n};\n","import * as React from \"react\";\nimport { Fab } from \"@material-ui/core\";\nimport { useContext } from \"react\";\nimport AddRoundedIcon from \"@material-ui/icons/AddRounded\";\nimport { UserContext } from \"../../App\";\nimport { SheetContext } from \"../pages/SplitTheCost\";\n\nexport const AddItemFab: React.FC = () => {\n  const { sheetDispatch } = useContext(SheetContext);\n  const { userState } = useContext(UserContext);\n\n  function addEntry() {\n    sheetDispatch({\n      type: \"addEntry\",\n      createdBy: userState.curUser!.id,\n      item: \"\",\n      cost: 0,\n      exclude: [],\n      note: \"\",\n    });\n  }\n\n  return (\n    <div className='addItemFabDiv'>\n      <Fab\n        className='addItemFab'\n        variant='extended'\n        size='medium'\n        onClick={addEntry}\n      >\n        <AddRoundedIcon />\n        <span className='leftMarginSmall'>Add Expense</span>\n      </Fab>\n    </div>\n  );\n};\n","import { nanoid } from \"nanoid\";\nimport { db, sheetStateConverter } from \"../firebase\";\nimport { Entry, SaveState, SheetState, User } from \"../models/models\";\n\nexport type AddEntryAction = {\n  type: \"addEntry\";\n  createdBy: string;\n  item?: string;\n  cost?: number;\n  exclude?: string[];\n  note?: string;\n  local?: boolean;\n};\nexport type RemoveEntryAction = {\n  type: \"removeEntry\";\n  entryId: string;\n  local?: boolean;\n};\nexport type UpdateEntryAction = {\n  type: \"updateEntry\";\n  entry: Entry;\n  section: \"item\" | \"cost\" | \"note\" | \"user\";\n  value: string;\n  local?: boolean;\n};\nexport type AddUserAction = {\n  type: \"addUser\";\n  firstName: string;\n  lastName: string;\n  email: string;\n  local?: boolean;\n};\nexport type RemoveUserAction = {\n  type: \"removeUser\";\n  userId: string;\n  local?: boolean;\n};\nexport type UpdateExcludedUsersAction = {\n  type: \"updateExcludedUsers\";\n  exclude: string[];\n  entry: Entry;\n  local?: boolean;\n};\nexport type RemoveExcludedUserAction = {\n  type: \"removeExcludedUser\";\n  userId: string;\n  entry: Entry;\n  local?: boolean;\n};\nexport type ChangeSheetTitleAction = {\n  type: \"changeSheetTitle\";\n  title: string;\n};\nexport type ChangeSheetLinkAction = {\n  type: \"changeSheetLink\";\n  link: string;\n};\nexport type UpdateReadOnlyAction = {\n  type: \"updateReadOnly\";\n  readOnly: boolean;\n};\nexport type UpdateSheetPasswordAction = {\n  type: \"updateSheetPassword\";\n  password: string;\n};\nexport type RemoveSheetPasswordAction = {\n  type: \"removeSheetPassword\";\n};\nexport type SaveSheetAction = {\n  type: \"saveSheet\";\n};\nexport type AutosaveSheetAction = {\n  type: \"autosaveSheet\";\n  setAutosaveState: React.Dispatch<React.SetStateAction<SaveState>>;\n};\nexport type DeleteSheetAction = {\n  type: \"deleteSheet\";\n};\nexport type UpdateSheetStateAction = {\n  type: \"updateSheetState\";\n  sheetState: SheetState;\n};\n\nexport type SheetAction =\n  | AddEntryAction\n  | RemoveEntryAction\n  | UpdateEntryAction\n  | AddUserAction\n  | RemoveUserAction\n  | UpdateExcludedUsersAction\n  | RemoveExcludedUserAction\n  | ChangeSheetTitleAction\n  | ChangeSheetLinkAction\n  | UpdateSheetPasswordAction\n  | RemoveSheetPasswordAction\n  | SaveSheetAction\n  | AutosaveSheetAction\n  | UpdateReadOnlyAction\n  | DeleteSheetAction\n  | UpdateSheetStateAction;\n\nexport function sheetReducer(state: SheetState, action: SheetAction) {\n  switch (action.type) {\n    case \"addEntry\":\n      return addEntry(state, action);\n    case \"removeEntry\":\n      return removeEntry(state, action);\n    case \"updateEntry\":\n      return updateEntry(state, action);\n    case \"addUser\":\n      return addUser(state, action);\n    case \"removeUser\":\n      return removeUser(state, action);\n    case \"updateExcludedUsers\":\n      return updateExcludedUsers(state, action);\n    case \"removeExcludedUser\":\n      return removeExcludedUser(state, action);\n    case \"changeSheetTitle\":\n      return changeSheetTitle(state, action);\n    case \"changeSheetLink\":\n      return changeSheetLink(state, action);\n    case \"updateSheetPassword\":\n      return updateSheetPassword(state, action);\n    case \"removeSheetPassword\":\n      return removeSheetPassword(state, action);\n    case \"saveSheet\":\n      return saveSheet(state, action);\n    case \"autosaveSheet\":\n      return autosaveSheet(state, action);\n    case \"updateReadOnly\":\n      return updateReadOnly(state, action);\n    case \"deleteSheet\":\n      return deleteSheet(state, action);\n    case \"updateSheetState\":\n      return action.sheetState;\n    default:\n      return state;\n  }\n}\n\n// ----------------- SHEET ACTIONS -----------------\n\n// Add a new entry to the sheet.\nfunction addEntry(state: SheetState, action: AddEntryAction): SheetState {\n  const newEntry: Entry = {\n    id: nanoid(),\n    timestamp: new Date(Date.now()).toUTCString(),\n    lastEdited: Date.now(),\n    item: action.item ? action.item : \"\",\n    cost: action.cost ? action.cost : 0,\n    exclude: action.exclude ? action.exclude : [],\n    note: action.note ? action.note : \"\",\n    user: action.createdBy,\n    createdBy: action.createdBy,\n  };\n\n  const newSheetState: SheetState = {\n    ...state,\n    entries: [...state.entries, newEntry],\n    lastEdited: Date.now(),\n  };\n  updateFirestore(newSheetState, action.local);\n  return newSheetState;\n}\n\n// Remove an entry from the sheet.\nfunction removeEntry(state: SheetState, action: RemoveEntryAction): SheetState {\n  const newEntries = state.entries.filter(\n    (entry) => entry.id !== action.entryId\n  );\n\n  const newSheetState: SheetState = {\n    ...state,\n    entries: newEntries,\n    lastEdited: Date.now(),\n  };\n  updateFirestore(newSheetState, action.local);\n  return newSheetState;\n}\n\n// Update a section of an entry.\nfunction updateEntry(state: SheetState, action: UpdateEntryAction): SheetState {\n  const entry = action.entry;\n  const value = action.value;\n  let newEntry: Entry = { ...entry, lastEdited: Date.now() };\n\n  if (action.section === \"item\") {\n    if (entry.item === value) return state;\n    newEntry = { ...newEntry, item: value };\n  } else if (action.section === \"cost\") {\n    newEntry = { ...newEntry, cost: Number(value.replaceAll(\",\", \"\")) };\n  } else if (action.section === \"user\") {\n    if (entry.user === value) return state;\n    newEntry = { ...newEntry, user: value };\n  } else {\n    if (entry.note === value) return state;\n    newEntry = { ...newEntry, note: value };\n  }\n  const newEntries = [...state.entries];\n  newEntries[newEntries.indexOf(entry)] = newEntry;\n\n  const newSheetState: SheetState = {\n    ...state,\n    entries: newEntries,\n    lastEdited: Date.now(),\n  };\n  return newSheetState;\n}\n\n// Add a user to the sheet.\nfunction addUser(state: SheetState, action: AddUserAction): SheetState {\n  if (state.numUsers >= 10) return state;\n\n  let duplicateUser = false;\n  Object.entries(state.users).forEach((pair) => {\n    const user = pair[1];\n    if (\n      user.firstName === action.firstName &&\n      user.lastName === action.lastName\n    ) {\n      duplicateUser = true;\n    }\n  });\n\n  if (duplicateUser) return state;\n\n  const newUser: User = {\n    id: nanoid(),\n    firstName: action.firstName,\n    lastName: action.lastName,\n    initials: `${action.firstName.charAt(0)}${action.lastName.charAt(\n      0\n    )}`.toLocaleUpperCase(),\n    displayName: `${action.firstName} ${action.lastName}`,\n    email: action.email,\n  };\n\n  const newSheetState: SheetState = {\n    ...state,\n    users: { ...state.users, [newUser.id]: newUser },\n    numUsers: state.numUsers + 1,\n    lastEdited: Date.now(),\n  };\n  updateFirestore(newSheetState, action.local);\n  return newSheetState;\n}\n\n// Remove a user from the sheet.\nfunction removeUser(state: SheetState, action: RemoveUserAction): SheetState {\n  if (state.numUsers === 1) return state;\n\n  // Remove user from users dictionary.\n  const newUsers = { ...state.users };\n  delete newUsers[action.userId];\n\n  // Remove entries created by the user and/or associated with the user.\n  const newEntries = state.entries.filter(\n    (entry) => entry.createdBy !== action.userId && entry.user !== action.userId\n  );\n\n  // Remove user from any excluded user lists.\n  newEntries.forEach((entry, idx) => {\n    if (entry.exclude.includes(action.userId)) {\n      let newExcludedUsers = entry.exclude.filter(\n        (curId) => action.userId !== curId\n      );\n      let updatedEntry = { ...entry, exclude: newExcludedUsers };\n      newEntries[idx] = updatedEntry;\n    }\n  });\n\n  const newSheetState: SheetState = {\n    ...state,\n    entries: newEntries,\n    users: newUsers,\n    numUsers: state.numUsers - 1,\n    lastEdited: Date.now(),\n  };\n  updateFirestore(newSheetState, action.local);\n  return newSheetState;\n}\n\n// Update the excluded userIds for a specific entry.\nfunction updateExcludedUsers(\n  state: SheetState,\n  action: UpdateExcludedUsersAction\n): SheetState {\n  const newEntry = {\n    ...action.entry,\n    exclude: action.exclude,\n  };\n  const newEntries = [...state.entries];\n  newEntries[newEntries.indexOf(action.entry)] = newEntry;\n\n  const newSheetState: SheetState = {\n    ...state,\n    entries: newEntries,\n    lastEdited: Date.now(),\n  };\n  updateFirestore(newSheetState, action.local);\n  return newSheetState;\n}\n\n// Remove an excluded user from a specific entry.\nfunction removeExcludedUser(\n  state: SheetState,\n  action: RemoveExcludedUserAction\n): SheetState {\n  const newEntry = {\n    ...action.entry,\n    exclude: action.entry.exclude.filter((userId) => userId !== action.userId),\n  };\n  const newEntries = [...state.entries];\n  newEntries[newEntries.indexOf(action.entry)] = newEntry;\n\n  const newSheetState: SheetState = {\n    ...state,\n    entries: newEntries,\n    lastEdited: Date.now(),\n  };\n  updateFirestore(newSheetState, action.local);\n  return newSheetState;\n}\n\n// Update the sheet's title.\nfunction changeSheetTitle(\n  state: SheetState,\n  action: ChangeSheetTitleAction\n): SheetState {\n  if (state.title === action.title) return state;\n\n  const newSheetState: SheetState = {\n    ...state,\n    title: action.title,\n    lastEdited: Date.now(),\n  };\n  updateFirestore(newSheetState);\n  return newSheetState;\n}\n\n// Update the sheet's custom link.\nfunction changeSheetLink(\n  state: SheetState,\n  action: ChangeSheetLinkAction\n): SheetState {\n  if (\n    !action.link ||\n    state.customLink === action.link ||\n    action.link.length < 5\n  )\n    return state;\n\n  // Remove any existing custom links from Firestore.\n  if (state.customLink) {\n    db.collection(\"customLinks\").doc(state.customLink).delete();\n  }\n\n  // Add the new custom link to Firestore.\n  const firebaseLink = { sheetId: state.id };\n  db.collection(\"customLinks\").doc(action.link).set(firebaseLink);\n\n  const newSheetState: SheetState = {\n    ...state,\n    customLink: action.link,\n    lastEdited: Date.now(),\n  };\n  updateFirestore(newSheetState);\n  return newSheetState;\n}\n\nfunction updateSheetPassword(\n  state: SheetState,\n  action: UpdateSheetPasswordAction\n): SheetState {\n  if (state.local) return state;\n\n  const bcrypt = require(\"bcryptjs\");\n  const saltRounds = 10;\n\n  bcrypt.hash(action.password, saltRounds, function (err: Error, hash: string) {\n    if (!err) {\n      const newSheetState = {\n        ...state,\n        password: hash,\n        lastEdited: Date.now(),\n      };\n      updateFirestore(newSheetState);\n      return newSheetState;\n    }\n  });\n\n  return state;\n}\n\n// Remove the current sheet's password (if one exists).\nfunction removeSheetPassword(\n  state: SheetState,\n  action: RemoveSheetPasswordAction\n): SheetState {\n  if (state.password) {\n    const newSheetState = { ...state, password: \"\", lastEdited: Date.now() };\n    updateFirestore(newSheetState);\n    return newSheetState;\n  }\n\n  return state;\n}\n\n// Save the sheet in Firestore and set the sheet to auto-update.\nfunction saveSheet(state: SheetState, action: SaveSheetAction): SheetState {\n  if (!state.local) return state;\n\n  const newSheetState = { ...state, local: false, lastEdited: Date.now() };\n  updateFirestore(newSheetState);\n  return newSheetState;\n}\n\nfunction autosaveSheet(\n  state: SheetState,\n  action: AutosaveSheetAction\n): SheetState {\n  if (Date.now() - state.lastEdited < 11000) {\n    action.setAutosaveState(SaveState.Saving);\n    updateFirestore(state);\n  }\n\n  return state;\n}\n\nfunction updateReadOnly(\n  state: SheetState,\n  action: UpdateReadOnlyAction\n): SheetState {\n  const newSheetState = {\n    ...state,\n    readOnly: action.readOnly,\n    lastEdited: Date.now(),\n  };\n  updateFirestore(newSheetState);\n  return newSheetState;\n}\n\nfunction deleteSheet(state: SheetState, action: DeleteSheetAction): SheetState {\n  if (state.local) {\n    return state;\n  }\n\n  db.collection(\"deletedSheets\")\n    .withConverter(sheetStateConverter)\n    .doc(state.id)\n    .set(state);\n  db.collection(\"sheets\").doc(state.id).delete();\n\n  if (state.customLink) {\n    db.collection(\"deletedCustomLinks\")\n      .doc(state.customLink)\n      .set({ sheetId: state.id });\n    db.collection(\"customLinks\").doc(state.customLink).delete();\n  }\n\n  return state;\n}\n\nfunction updateFirestore(state: SheetState, local?: boolean) {\n  if (local || state.local) return;\n\n  db.collection(\"sheets\")\n    .withConverter(sheetStateConverter)\n    .doc(state.id)\n    .set(state);\n}\n","import {\n  Button,\n  Checkbox,\n  FormControlLabel,\n  Grid,\n  IconButton,\n  TextField,\n} from \"@material-ui/core\";\nimport React, { useContext, useState } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport CloseRoundedIcon from \"@material-ui/icons/CloseRounded\";\nimport { motion } from \"framer-motion\";\nimport { UserContext } from \"../../App\";\nimport { User } from \"../../models/models\";\nimport { nanoid } from \"nanoid\";\nimport { validateName, validateSheetTitle } from \"../../logic/logic\";\n\nenum CreateSheetStep {\n  SheetName = 1,\n  DisplayName = 2,\n}\n\nexport const CreateNewSheet: React.FC = () => {\n  const { userDispatch } = useContext(UserContext);\n  const history = useHistory();\n\n  const [step, setStep] = useState(CreateSheetStep.SheetName);\n\n  const [sheetTitle, setSheetTitle] = useState(\"\");\n  const [validTitle, setValidTitle] = useState(true);\n  const [agreeToTerms, setAgreeToTerms] = useState(false);\n  const [firstName, setFirstName] = useState(\"\");\n  const [validFirstName, setValidFirstName] = useState(true);\n  const [lastName, setLastName] = useState(\"\");\n  const [validLastName, setValidLastName] = useState(true);\n\n  function handleTitleButton() {\n    const temp = validateSheetTitle(sheetTitle);\n    setValidTitle(temp);\n    if (temp) {\n      setStep(CreateSheetStep.DisplayName);\n    }\n  }\n\n  function handleNameButton() {\n    const validFirst = validateName(firstName.trim());\n    const validLast = validateName(lastName.trim());\n    setValidFirstName(validFirst);\n    setValidLastName(validLast);\n\n    if (validFirst && validLast) {\n      createNewSheet();\n    }\n  }\n\n  function createNewSheet() {\n    const first = firstName.trim();\n    const last = lastName.trim();\n\n    const newUser: User = {\n      id: nanoid(),\n      firstName: first,\n      lastName: last,\n      initials: `${first.charAt(0)}${last.charAt(0)}`.toLocaleUpperCase(),\n      displayName: `${first} ${last}`,\n      email: \"\",\n    };\n    userDispatch({ type: \"updateCurUser\", user: newUser });\n    userDispatch({ type: \"setAuthStatus\", authenticated: true });\n    history.push({ pathname: \"/sheet/new\", state: { title: sheetTitle } });\n  }\n\n  function sheetNameStep() {\n    return (\n      <>\n        <div className='giantHeader'>Give your sheet a name:</div>\n        <TextField\n          className='giantTextField'\n          fullWidth\n          placeholder='Sheet name'\n          value={sheetTitle}\n          onChange={(e) => setSheetTitle(e.target.value)}\n          helperText={\n            validTitle\n              ? \"\"\n              : \"Title must be between 3-40 characters (select special characters are allowed).\"\n          }\n          inputProps={{\n            className: \"giantInput\",\n          }}\n          FormHelperTextProps={{\n            className: \"giantInputHelperText\",\n          }}\n        />\n        <FormControlLabel\n          className='termsAndConditions'\n          control={\n            <Checkbox\n              checked={agreeToTerms}\n              onClick={() => setAgreeToTerms(!agreeToTerms)}\n              color='primary'\n            />\n          }\n          label={\n            <>\n              I accept the SplitTheCost{\" \"}\n              <Link to='/tos' target='_blank'>\n                terms\n              </Link>\n              .\n            </>\n          }\n        />\n        <Button\n          className='continueButton'\n          disabled={!agreeToTerms}\n          onClick={handleTitleButton}\n        >\n          continue\n        </Button>\n      </>\n    );\n  }\n\n  function displayNameStep() {\n    return (\n      <>\n        <div className='giantHeader'>\n          Yup, we're basically done. What's your name?\n        </div>\n        <div>\n          <TextField\n            className='giantTextField halfWidthModalInput'\n            fullWidth\n            placeholder='First name'\n            value={firstName}\n            onChange={(e) => setFirstName(e.target.value)}\n            helperText={\n              validFirstName ? \"\" : \"Please enter a valid first name.\"\n            }\n            inputProps={{\n              className: \"giantInput\",\n            }}\n            FormHelperTextProps={{\n              className: \"giantInputHelperText\",\n            }}\n          />\n          <TextField\n            className='leftMarginLarge giantTextField halfWidthModalInput'\n            fullWidth\n            placeholder='Last name'\n            value={lastName}\n            onChange={(e) => setLastName(e.target.value)}\n            helperText={validLastName ? \"\" : \"Please enter a valid last name.\"}\n            inputProps={{\n              className: \"giantInput\",\n            }}\n            FormHelperTextProps={{\n              className: \"giantInputHelperText\",\n            }}\n          />\n        </div>\n        <div>\n          <Button\n            className='continueButton'\n            onClick={() => {\n              setStep(step - 1);\n            }}\n          >\n            go back\n          </Button>\n          <Button\n            className='leftMargin continueButton'\n            onClick={handleNameButton}\n          >\n            finish\n          </Button>\n        </div>\n      </>\n    );\n  }\n\n  function renderStep() {\n    if (step === CreateSheetStep.SheetName) return sheetNameStep();\n    if (step === CreateSheetStep.DisplayName) return displayNameStep();\n    return sheetNameStep();\n  }\n\n  return (\n    <motion.div\n      initial={{ x: 2000 }}\n      animate={{ x: 0 }}\n      transition={{ type: \"spring\", duration: 0.8 }}\n    >\n      <Grid className='createNewSheet' container spacing={0}>\n        <Grid item xs={1}></Grid>\n        <Grid className='createNewSheetItem' item xs={8}>\n          {renderStep()}\n        </Grid>\n      </Grid>\n      <div className='stepIndicator'>\n        <Link to='/'>\n          <IconButton size='small'>\n            <CloseRoundedIcon />\n          </IconButton>\n        </Link>\n        <span className='leftMarginSmall'>\n          Create a sheet (Step {step} of 2)\n        </span>\n      </div>\n    </motion.div>\n  );\n};\n","import * as React from \"react\";\nimport {\n  Button,\n  CircularProgress,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  TextField,\n} from \"@material-ui/core\";\nimport { SheetContext } from \"../pages/SplitTheCost\";\nimport { useContext, useState } from \"react\";\nimport { UserChip } from \"../bits/UserChip\";\nimport { UserContext } from \"../../App\";\nimport { User } from \"../../models/models\";\nimport { ModalHeader } from \"./ModalHeader\";\nimport { handleKeyPress } from \"../../logic/logic\";\n\ninterface Props {\n  open: boolean;\n}\n\nexport const PasswordUserModal: React.FC<Props> = ({ open }) => {\n  const { sheetState } = useContext(SheetContext);\n  const { userState, userDispatch } = useContext(UserContext);\n\n  const [selectedUser, setSelectedUser] = useState<User>();\n\n  const [password, setPassword] = useState(\"\");\n  const [validPassword, setValidPassword] = useState(true);\n\n  function validatePassword() {\n    if (!password) {\n      setValidPassword(false);\n      return;\n    }\n\n    if (!sheetState.password) {\n      userDispatch({ type: \"setAuthStatus\", authenticated: true });\n      return;\n    }\n\n    const bcrypt = require(\"bcryptjs\");\n    bcrypt.compare(\n      password,\n      sheetState.password,\n      function (err: Error, res: boolean) {\n        if (!res) {\n          setValidPassword(false);\n          return;\n        }\n\n        userDispatch({ type: \"setAuthStatus\", authenticated: true });\n      }\n    );\n  }\n\n  function confirmUser() {\n    if (selectedUser) {\n      userDispatch({\n        type: \"updateCurUser\",\n        user: selectedUser!,\n      });\n    }\n  }\n\n  function handleEnter() {\n    if (!userState.authenticated) {\n      validatePassword();\n    } else {\n      confirmUser();\n    }\n  }\n\n  function renderPasswordPrompt(): JSX.Element {\n    return (\n      <>\n        <DialogContent>\n          <TextField\n            className='bottomMargin'\n            fullWidth\n            label='Password'\n            onChange={(e) => setPassword(e.target.value)}\n            error={!validPassword}\n            helperText={validPassword ? \"\" : \"This password is incorrect.\"}\n            InputProps={{\n              type: \"password\",\n            }}\n          />\n        </DialogContent>\n        <DialogActions className='modalActions'>\n          <Button\n            className='modalConfirmButton rightMarginSmall'\n            disabled={!password}\n            onClick={validatePassword}\n          >\n            Confirm\n          </Button>\n        </DialogActions>\n      </>\n    );\n  }\n\n  function renderUserSelection(): JSX.Element {\n    return (\n      <>\n        <DialogContent>\n          {!Object.keys(sheetState.users).length ? (\n            <div className='trueCenter'>\n              <CircularProgress />\n            </div>\n          ) : (\n            Object.entries(sheetState.users).map((pair) => {\n              const user = pair[1];\n              return (\n                <UserChip\n                  className={`bottomMargin rightMargin ${\n                    selectedUser?.id === user.id && \"selectedChip\"\n                  }`}\n                  user={user}\n                  userIdx={Object.keys(sheetState.users).indexOf(user.id)}\n                  onClick={setSelectedUser}\n                  key={user.id}\n                />\n              );\n            })\n          )}\n        </DialogContent>\n        <DialogActions className='modalActions'>\n          <Button\n            className='modalConfirmButton rightMarginSmall'\n            disabled={!selectedUser}\n            onClick={confirmUser}\n          >\n            Confirm\n          </Button>\n        </DialogActions>\n      </>\n    );\n  }\n\n  return (\n    <Dialog\n      fullWidth={userState.authenticated}\n      disableBackdropClick\n      maxWidth='sm'\n      open={open}\n      onKeyPress={(e) => handleKeyPress(e, \"enter\", handleEnter)}\n      PaperProps={{ className: \"modal\" }}\n    >\n      <ModalHeader\n        title={\n          userState.authenticated ? \"Who are You?\" : \"Enter Sheet Password\"\n        }\n      />\n      {userState.authenticated ? renderUserSelection() : renderPasswordPrompt()}\n    </Dialog>\n  );\n};\n","import React from \"react\";\n\nexport const ViewOnDesktop: React.FC = () => {\n  return (\n    <div className='errorPage'>\n      <span className='errorPageHeader'>\n        <b>coming soon...</b>\n      </span>\n      <span className='errorPageSubtitle'>\n        We're currently working on a mobile friendly version of splithecost - in\n        the meantime, please visit us on a computer!\n      </span>\n    </div>\n  );\n};\n","import React, { createContext, useContext, useEffect, useReducer } from \"react\";\nimport { SaveState, SheetState } from \"../../models/models\";\nimport { Entries } from \"../entries/Entries\";\nimport { Header } from \"../header/Header\";\nimport { UsersBar } from \"../users/UsersBar\";\nimport { SideDialog } from \"../dialog/SideDialog\";\nimport { AddItemFab } from \"../bits/AddItemFab\";\nimport { SheetAction, sheetReducer } from \"../../actions/sheetActions\";\nimport { UserContext } from \"../../App\";\nimport { db, sheetStateConverter } from \"../../firebase\";\nimport { useHistory, useLocation, useParams } from \"react-router-dom\";\nimport { PasswordUserModal } from \"../modals/PasswordUserModal\";\nimport { nanoid } from \"nanoid\";\nimport { ViewOnDesktop } from \"./ViewOnDesktop\";\nimport { useState } from \"react\";\n\nvar initialSheetState: SheetState = {\n  title: \"Loading Sheet...\",\n  timestamp: \"\",\n  lastAccessed: 0,\n  lastEdited: 0,\n  entries: [],\n  users: {},\n  numUsers: 0,\n  createdBy: \"\",\n  local: true,\n  readOnly: true,\n  id: \"\",\n};\n\nexport const SheetContext = createContext<{\n  sheetState: SheetState;\n  sheetDispatch: React.Dispatch<SheetAction>;\n}>({\n  sheetState: initialSheetState,\n  sheetDispatch: () => null,\n});\n\nexport const SplitTheCost: React.FC = () => {\n  const isMobile = window.innerWidth <= 1000;\n  const history = useHistory();\n  const location = useLocation<{ title: string }>();\n  const { sheetId } = useParams<{ sheetId: string }>();\n\n  const [sheetState, sheetDispatch] = useReducer(\n    sheetReducer,\n    initialSheetState\n  );\n  const { userState, userDispatch } = useContext(UserContext);\n\n  const [autosaveState, setAutosaveState] = useState(\n    sheetState.local ? SaveState.Unsaved : SaveState.Saved\n  );\n\n  useEffect(() => {\n    if (!sheetId || sheetId === \"new\") {\n      generateNewSheetState();\n    } else {\n      fetchSheetState();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    setAutosaveState(sheetState.local ? SaveState.Unsaved : SaveState.Saved);\n    const saveInterval = setInterval(() => {\n      autosaveSheet();\n    }, 10000);\n\n    return () => clearInterval(saveInterval);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [sheetState.local]);\n\n  async function autosaveSheet() {\n    if (!sheetState.local) {\n      sheetDispatch({\n        type: \"autosaveSheet\",\n        setAutosaveState: setAutosaveState,\n      });\n      await new Promise((r) => setTimeout(r, 1500));\n      setAutosaveState(SaveState.Saved);\n    }\n  }\n\n  function generateNewSheetState() {\n    if (!userState.curUser || !location.state.title) {\n      history.push(\"/create\");\n      return;\n    }\n\n    const newSheetState: SheetState = {\n      id: nanoid(10),\n      timestamp: new Date(Date.now()).toUTCString(),\n      lastAccessed: Date.now(),\n      lastEdited: Date.now(),\n      title: location.state.title,\n      entries: [],\n      users: { [userState.curUser.id]: userState.curUser },\n      numUsers: 1,\n      createdBy: userState.curUser.id,\n      local: true,\n      readOnly: false,\n    };\n\n    sheetDispatch({ type: \"updateSheetState\", sheetState: newSheetState });\n    sheetDispatch({ type: \"addEntry\", createdBy: userState.curUser.id });\n  }\n\n  async function fetchSheetState() {\n    const sheetSnapshot = await db\n      .collection(\"sheets\")\n      .withConverter(sheetStateConverter)\n      .doc(sheetId)\n      .get();\n    const fetchedSheetState = sheetSnapshot.data();\n    if (fetchedSheetState) {\n      sheetDispatch({\n        type: \"updateSheetState\",\n        sheetState: {\n          ...fetchedSheetState,\n          lastAccessed: Date.now(),\n          readOnly: false,\n        },\n      });\n      userDispatch({\n        type: \"setAuthStatus\",\n        authenticated: !fetchedSheetState.password,\n      });\n      return;\n    }\n\n    const customLinkSnapshot = await db\n      .collection(\"customLinks\")\n      .doc(sheetId)\n      .get();\n\n    const customLink = customLinkSnapshot.data();\n    if (customLink) {\n      const actualSheetId = customLink[\"sheetId\"];\n      const customSheetSnapshot = await db\n        .collection(\"sheets\")\n        .withConverter(sheetStateConverter)\n        .doc(actualSheetId)\n        .get();\n      const customFetchedSheetState = customSheetSnapshot.data();\n      if (customFetchedSheetState) {\n        sheetDispatch({\n          type: \"updateSheetState\",\n          sheetState: {\n            ...customFetchedSheetState,\n            lastAccessed: Date.now(),\n          },\n        });\n        userDispatch({\n          type: \"setAuthStatus\",\n          authenticated: !customFetchedSheetState.password,\n        });\n        return;\n      }\n    }\n\n    history.push({ pathname: \"/invalidsheet\", state: { sheetId: sheetId } });\n  }\n\n  function renderDeviceView(): JSX.Element {\n    if (isMobile) {\n      return <ViewOnDesktop />;\n    } else {\n      return (\n        <>\n          <Header saveState={autosaveState} />\n          <UsersBar />\n          <Entries />\n          {userState.authenticated && <SideDialog />}\n          {!sheetState.readOnly && userState.curUser && <AddItemFab />}\n          <PasswordUserModal open={!userState.curUser} />\n        </>\n      );\n    }\n  }\n\n  return (\n    <SheetContext.Provider\n      value={{ sheetState: sheetState, sheetDispatch: sheetDispatch }}\n    >\n      {renderDeviceView()}\n    </SheetContext.Provider>\n  );\n};\n","export default __webpack_public_path__ + \"static/media/homepage.d372b9ab.png\";","export default __webpack_public_path__ + \"static/media/blob.244efd39.svg\";","import React from \"react\";\nimport { Button, Grid } from \"@material-ui/core\";\nimport { Link } from \"react-router-dom\";\nimport homepage from \"../../assets/homepage.png\";\nimport blob from \"../../assets/blob.svg\";\nimport { ViewOnDesktop } from \"./ViewOnDesktop\";\n\nexport const HomePage: React.FC = () => {\n  const isMobile = window.innerWidth < 1000;\n\n  if (isMobile) {\n    return <ViewOnDesktop />;\n  } else {\n    return (\n      <>\n        <Grid className='homepage' container spacing={0} alignContent='center'>\n          <Grid item container xs={8} justify='center'>\n            <img id='homepageBlob' src={blob} alt='blob' />\n            <img id='homepageImg' src={homepage} alt='homepage' />\n          </Grid>\n          <Grid item container xs={4} alignItems='center' alignContent='center'>\n            <div id='homepageText'>\n              <span id='homepageTitle'>welcome to splitthecost.</span>\n              <span id='homepageSubtitle'>\n                shared expenses for trips/events made simple. no sign up\n                required!\n              </span>\n              <Link className='noTextDecoration' to='/create'>\n                <Button className='createNewButton'>create new sheet</Button>\n              </Link>\n            </div>\n          </Grid>\n        </Grid>\n      </>\n    );\n  }\n};\n","import { UserState, User } from \"../models/models\";\n\nexport type RemoveCurUserAction = {\n  type: \"removeCurUser\";\n}\n\nexport type UpdateCurUserAction = {\n  type: \"updateCurUser\";\n  user: User;\n};\n\nexport type SetDarkModeAction = {\n  type: \"setDarkMode\";\n  darkMode: boolean;\n};\n\nexport type SetAuthStatusAction = {\n  type: \"setAuthStatus\";\n  authenticated: boolean;\n};\n\nexport type UserAction =\n  | RemoveCurUserAction\n  | UpdateCurUserAction\n  | SetDarkModeAction\n  | SetAuthStatusAction;\n\nexport function userReducer(state: UserState, action: UserAction) {\n  switch (action.type) {\n    case \"removeCurUser\":\n      return removeCurUser(state, action);\n    case \"updateCurUser\":\n      return updateCurUser(state, action);\n    case \"setDarkMode\":\n      return setDarkMode(state, action);\n    case \"setAuthStatus\":\n      return setAuthStatus(state, action);\n    default:\n      return state;\n  }\n}\n\n// ----------------- APP USER ACTIONS -----------------\n\n// Update the current user.\nfunction removeCurUser(\n  state: UserState,\n  action: RemoveCurUserAction\n): UserState {\n  return { ...state, curUser: undefined };\n}\n\n// Update the current user.\nfunction updateCurUser(\n  state: UserState,\n  action: UpdateCurUserAction\n): UserState {\n  return { ...state, curUser: action.user };\n}\n\n// Set dark mode.\nfunction setDarkMode(state: UserState, action: SetDarkModeAction): UserState {\n  return { ...state, darkMode: action.darkMode };\n}\n\n// Set the authentication status for the current sheet.\nfunction setAuthStatus(\n  state: UserState,\n  action: SetAuthStatusAction\n): UserState {\n  return { ...state, authenticated: action.authenticated };\n}\n","import { Button } from \"@material-ui/core\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nexport const PageNotFound: React.FC = () => {\n  return (\n    <div className='errorPage'>\n      <span className='errorPageHeader'>\n        <b>404</b> - this page doesn't exist.\n      </span>\n\n      <Link className='noTextDecoration' to='/'>\n        <Button className='createNewButton'>home</Button>\n      </Link>\n    </div>\n  );\n};\n","import { Button } from \"@material-ui/core\";\nimport React from \"react\";\nimport { Link, useLocation } from \"react-router-dom\";\n\nexport const SheetNotFound: React.FC = () => {\n  const location = useLocation<{ sheetId: string }>();\n\n  return (\n    <div className='errorPage'>\n      <span className='errorPageHeader'>\n        sorry, we couldn't find a sheet with id \"\n        <b>{location.state?.sheetId}</b>\n        \".\n      </span>\n\n      <Link className='noTextDecoration' to='/create'>\n        <Button className='createNewButton'>create new sheet</Button>\n      </Link>\n    </div>\n  );\n};\n","import React from \"react\";\n\nexport const TermsOfService: React.FC = () => {\n  return (\n    <div id='tos'>\n      <h2>Terms of Service</h2>\n      <p>\n        SplitTheCost stores all data in <b>unencrypted plaintext</b> and is not\n        responsible for the loss or unauthorized release of any data. In other\n        words,{\" \"}\n        <b>don't use SplitTheCost for private or confidential information! </b>\n        SplitTheCost is not liable for any direct, indirect, incidental,\n        consequential, or special damages or losses resulting from authorized or\n        unauthorized use of or access to this platform.\n        <br />\n        <br />\n        That's about it! Have fun and enjoy to your heart's desire.\n      </p>\n    </div>\n  );\n};\n","import React, { createContext, useEffect, useReducer } from \"react\";\nimport \"./main.css\";\nimport { SplitTheCost } from \"./components/pages/SplitTheCost\";\nimport { Route, HashRouter as Router, Switch } from \"react-router-dom\";\nimport { HomePage } from \"./components/pages/HomePage\";\nimport { UserState } from \"./models/models\";\nimport { UserAction, userReducer } from \"./actions/appUserActions\";\nimport { CreateNewSheet } from \"./components/pages/CreateNewSheet\";\nimport { PageNotFound } from \"./components/pages/PageNotFound\";\nimport { SheetNotFound } from \"./components/pages/SheetNotFound\";\nimport { TermsOfService } from \"./components/pages/TermsOfService\";\nimport { enable as enableDarkMode, disable as disableDarkMode } from 'darkreader';\n\nconst initialUserState: UserState = {\n  curUser: undefined,\n  darkMode: false,\n  authenticated: false,\n};\n\nexport const UserContext = createContext<{\n  userState: UserState;\n  userDispatch: React.Dispatch<UserAction>;\n}>({\n  userState: initialUserState,\n  userDispatch: () => null,\n});\n\nfunction App() {\n  const [userState, userDispatch] = useReducer(userReducer, initialUserState);\n\n  useEffect(() => {\n    if (userState.darkMode) {\n      enableDarkMode({\n        brightness: 100,\n        contrast: 100,\n        sepia: 0\n      });\n    } else {\n      disableDarkMode();\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [userState.darkMode]);\n\n  return (\n    <Router>\n      <UserContext.Provider\n        value={{ userState: userState, userDispatch: userDispatch }}\n      >\n        <Switch>\n          <Route path='/' exact component={HomePage} />\n          <Route path='/create' exact component={CreateNewSheet} />\n          <Route path='/sheet/:sheetId' exact component={SplitTheCost} />\n          <Route path='/invalidsheet' exact component={SheetNotFound} />\n          <Route path='/tos' exact component={TermsOfService} />\n          <Route component={PageNotFound} />\n        </Switch>\n      </UserContext.Provider>\n    </Router>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  // <React.StrictMode>\n  <App />,\n  // </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}