(this.webpackJsonpsplitthecost=this.webpackJsonpsplitthecost||[]).push([[0],{121:function(e,t,n){},122:function(e,t,n){},132:function(e,t,n){"use strict";n.r(t);var a,s=n(2),c=n(0),r=n(16),i=n.n(r),l=(n(121),n(8)),o=(n(122),n(10)),u=n(36),d=n.n(u),j=n(58),b=n(53);!function(e){e[e.Unsaved=1]="Unsaved",e[e.Saving=2]="Saving",e[e.Saved=3]="Saved"}(a||(a={}));var O=n(177),m=n(178),h=n(136),x=n(179),f=n(192),p=n(79),v=n.n(p),g=n(74),y=n(191);function N(e,t,n){if(n)return"#dedede";var a=["#AD1457","#F9A825","#1565C0","#6A1B9A","#4527A0","#FF8F00","#D84315","#283593","#4E342E","#00838F","#0277BD","#EF6C00","#00695C","#2E7D32","#C62828","#9E9D24","#558B2F","#37474F","#424242"];return a[t%a.length]}function S(e,t,n){e.key.toLowerCase()===t&&n()}var C=function(e){var t=e.user,n=e.userIdx,a=e.tooltipPlacement,r=e.onClick,i=e.iconOnHover,o=e.disabled,u=e.className,d=Object(c.useState)(!1),j=Object(l.a)(d,2),b=j[0],O=j[1];return Object(s.jsx)(y.a,{className:u,arrow:!0,title:t.displayName,placement:a,onClick:r,children:Object(s.jsx)(f.a,{className:"avatar",style:{backgroundColor:N(0,n,o),cursor:r?"pointer":"default"},children:Object(s.jsx)("span",{onMouseEnter:function(){return O(!0)},onMouseLeave:function(){return O(!1)},children:b&&i||t.initials})})})},k=n(55),w=n(190),U=n(174),D=n(189),M=n(175),E=n(176),I=n(172),B=n(59),L=n.n(B),P=function(e){var t=e.title,n=e.subtitle,a=e.onClose;return Object(s.jsxs)(I.a,{className:"modalTitle",children:[t,n&&Object(s.jsxs)(s.Fragment,{children:[" ","| ",Object(s.jsx)("b",{children:"".concat(n)})]}),a&&Object(s.jsx)(h.a,{className:"modalClose",size:"small",onClick:a,children:Object(s.jsx)(L.a,{})})]})},A=n(193),T=function(e){var t=e.user,n=e.userIdx,a=e.onRemove,c=e.onClick,r=e.className;return Object(s.jsx)("span",{onClick:c&&function(){return c(t)},children:Object(s.jsx)(A.a,{className:"chip ".concat(r," ").concat(c&&"linkCursor"),avatar:Object(s.jsx)(f.a,{className:"smallAvatar",style:{backgroundColor:N(0,n)},children:t.initials}),label:t.displayName,onDelete:a&&function(){return a(t)}},t.id)})},F=function(e){var t=e.open,n=e.setOpen,a=e.entry,r=Object(c.useContext)(Ge),i=r.sheetState,o=r.sheetDispatch,u=Object(c.useState)(a.exclude),d=Object(l.a)(u,2),j=d[0],b=d[1];function O(){a.exclude!==j&&o({type:"updateExcludedUsers",exclude:j,entry:a}),h()}function m(e){j.includes(e)?b(j.filter((function(t){return t!==e}))):b([].concat(Object(k.a)(j),[e]))}function h(){b(a.exclude),n(!1)}return Object(c.useEffect)((function(){b(a.exclude)}),[a.exclude]),Object(s.jsxs)(w.a,{fullWidth:!0,disableBackdropClick:!0,maxWidth:"xs",onClose:h,open:t,onKeyPress:function(e){return S(e,"enter",O)},PaperProps:{className:"modal"},children:[Object(s.jsx)(P,{title:"Included Friends",subtitle:a.item,onClose:h}),Object(s.jsxs)(U.a,{className:"excludeModalContent",children:[Object(s.jsx)("div",{className:"excludeModalColumn",children:Object.entries(i.users).map((function(e,t){var n=e[1];return t%2===0&&Object(s.jsxs)("div",{className:"excludeModalUser",children:[Object(s.jsx)(D.a,{checked:!j.includes(n.id),color:"primary",onClick:function(){return m(n.id)}}),Object(s.jsx)(T,{user:n,userIdx:Object.keys(i.users).indexOf(n.id),onClick:function(){return m(n.id)}})]},n.id)}))}),Object(s.jsx)("div",{className:"excludeModalColumn",children:Object.entries(i.users).map((function(e,t){var n=e[1];return t%2===1&&Object(s.jsxs)("div",{className:"excludeModalUser",children:[Object(s.jsx)(D.a,{checked:!j.includes(n.id),color:"primary",onClick:function(){return m(n.id)}}),Object(s.jsx)(T,{user:n,userIdx:Object.keys(i.users).indexOf(n.id),onClick:function(){return m(n.id)}})]},n.id)}))})]}),Object(s.jsxs)(M.a,{className:"modalActions",children:[Object(s.jsx)(E.a,{className:"rightMarginSmall",color:"primary",onClick:function(){return b([])},children:"Include All"}),Object(s.jsx)(E.a,{className:"modalConfirmButton rightMarginSmall",onClick:O,children:"Confirm"})]})]})},W=n(64),R=n.n(W),z=n(43),H=n(187),K=function(e){var t=e.open,n=e.setOpen,a=e.entry,r=Object(c.useContext)(Ge),i=r.sheetState,o=r.sheetDispatch,u=Object(c.useState)(a.user),d=Object(l.a)(u,2),j=d[0],b=d[1];function O(){j&&j!==a.user&&(o({type:"updateEntry",entry:a,section:"user",value:j}),h())}function m(e){b(e)}function h(){b(a.user),n(!1)}return Object(c.useEffect)((function(){b(a.user)}),[a.user]),Object(s.jsxs)(w.a,{fullWidth:!0,disableBackdropClick:!0,maxWidth:"xs",onClose:h,open:t,onKeyPress:function(e){return S(e,"enter",O)},PaperProps:{className:"modal"},children:[Object(s.jsx)(P,{title:"Who Paid?",subtitle:a.item,onClose:h}),Object(s.jsxs)(U.a,{className:"excludeModalContent",children:[Object(s.jsx)("div",{className:"excludeModalColumn",children:Object.entries(i.users).map((function(e,t){var n=e[1];return t%2===0&&Object(s.jsxs)("div",{className:"excludeModalUser",children:[Object(s.jsx)(H.a,{checked:j===n.id,onClick:function(){return m(n.id)}}),Object(s.jsx)(T,{user:n,userIdx:Object.keys(i.users).indexOf(n.id),onClick:function(){return m(n.id)}})]},n.id)}))}),Object(s.jsx)("div",{className:"excludeModalColumn",children:Object.entries(i.users).map((function(e,t){var n=e[1];return t%2===1&&Object(s.jsxs)("div",{className:"excludeModalUser",children:[Object(s.jsx)(H.a,{checked:j===n.id,onClick:function(){return m(n.id)}}),Object(s.jsx)(T,{user:n,userIdx:Object.keys(i.users).indexOf(n.id),onClick:function(){return m(n.id)}})]},n.id)}))})]}),Object(s.jsx)(M.a,{className:"modalActions",children:Object(s.jsx)(E.a,{className:"modalConfirmButton rightMarginSmall",onClick:O,children:"Confirm"})})]})},$=function(e){var t=e.entry,n=e.open,a=e.setOpen,r=Object(c.useContext)(Ge).sheetDispatch;function i(){a(!1)}function l(){r({type:"removeEntry",entryId:t.id}),a(!1)}return Object(s.jsxs)(w.a,{fullWidth:!0,disableBackdropClick:!0,maxWidth:"xs",onClose:i,open:n,onKeyPress:function(e){return S(e,"enter",l)},PaperProps:{className:"modal"},children:[Object(s.jsx)(P,{title:"Remove Entry",onClose:i}),Object(s.jsxs)(U.a,{children:["Are you sure you want to remove ",Object(s.jsx)("b",{children:t.item})," from this sheet?"]}),Object(s.jsx)(M.a,{className:"modalActions",children:Object(s.jsx)(E.a,{className:"modalConfirmButton rightMarginSmall",onClick:l,children:"Confirm"})})]})},G=function(e){var t=e.entry,n=e.rowIdx,a=Object(c.useContext)(Ge),r=a.sheetState,i=a.sheetDispatch,o=Object(c.useState)(!t.item&&!t.cost&&!t.note),u=Object(l.a)(o,2),d=u[0],j=u[1],b=Object(c.useState)(!1),p=Object(l.a)(b,2),y=p[0],N=p[1],S=Object(c.useState)(!1),k=Object(l.a)(S,2),w=k[0],U=k[1],D=Object(c.useState)(t.item),M=Object(l.a)(D,2),E=M[0],I=M[1],B=Object(c.useState)(t.note),L=Object(l.a)(B,2),P=L[0],A=L[1],T=Object(c.useState)(!1),W=Object(l.a)(T,2),H=W[0],G=W[1],Y=Object(c.useState)(!1),X=Object(l.a)(Y,2),Z=X[0],q=X[1],V=Object(c.useState)(!1),J=Object(l.a)(V,2),Q=J[0],_=J[1];function ee(e,n,a){switch(n){case"item":i({type:"updateEntry",entry:t,section:"item",value:e}),j(!E&&!t.cost&&!P);break;case"cost":i({type:"updateEntry",entry:t,section:"cost",value:e,local:a}),j(!E&&!Number(e)&&!P);break;case"note":i({type:"updateEntry",entry:t,section:"note",value:e}),j(!E&&!t.cost&&!P)}}return Object(s.jsxs)(z.b.div,{animate:{x:0,opacity:1},initial:{x:-2e3,opacity:0},transition:{type:"tween",duration:.5},children:[Object(s.jsxs)(O.a,{className:n%2?"lightRow":"darkRow",container:!0,spacing:0,children:[Object(s.jsx)(O.a,{item:!0,xs:3,children:Object(s.jsxs)("div",{className:"entryDiv",onMouseOver:function(){return N(!0)},onMouseLeave:function(){return N(!1)},children:[Object(s.jsx)(C,{className:"leftMargin",user:r.users[t.user],userIdx:Object.keys(r.users).indexOf(r.users[t.user].id),tooltipPlacement:"top",disabled:d,onClick:r.readOnly?void 0:function(){return q(!0)},iconOnHover:Object(s.jsx)(R.a,{})}),Object(s.jsx)(m.a,{className:"sideMargins",disableUnderline:!0,fullWidth:!0,readOnly:r.readOnly,value:E,placeholder:d?"Enter item name here":void 0,onFocus:function(){return j(!1)},onChange:function(e){return I(e.target.value)},onBlur:function(e){ee(e.target.value,"item")}}),!r.readOnly&&y&&Object(s.jsx)(h.a,{className:"iconButton largeIconButton rightMargin",onClick:function(){return _(!0)},children:Object(s.jsx)(v.a,{})})]})}),Object(s.jsx)(O.a,{item:!0,xs:1,children:Object(s.jsx)("div",{className:"entryDiv",children:Object(s.jsx)(m.a,{className:"sideMargins",disableUnderline:!0,fullWidth:!0,readOnly:r.readOnly,value:t.cost.toFixed(2),onFocus:function(){return j(!1)},onChange:function(e){ee(e.target.value,"cost",!0)},onBlur:function(e){ee(e.target.value,"cost")},startAdornment:Object(s.jsx)(x.a,{position:"start",children:"$"}),inputComponent:g.a,inputProps:{decimalScale:2,allowNegative:!1,thousandSeparator:",",allowLeadingZeros:!0}})})}),Object(s.jsx)(O.a,{item:!0,xs:2,children:Object(s.jsxs)("div",{className:"entryDiv",onMouseOver:function(){return U(!0)},onMouseLeave:function(){return U(!1)},children:[t.exclude.map((function(e,n){return n<3?Object(s.jsx)(C,{className:"leftMarginSmall",user:r.users[e],userIdx:Object.keys(r.users).indexOf(r.users[e].id),tooltipPlacement:"top"},e):3===n&&t.exclude.length>n?Object(s.jsx)(f.a,{className:"leftMarginSmall",children:"+".concat(t.exclude.length-3)},e):null})),!r.readOnly&&w&&Object(s.jsx)(h.a,{className:"iconButton largeIconButton leftMarginSmall",onClick:function(){return G(!0)},children:Object(s.jsx)(R.a,{})})]})}),Object(s.jsx)(O.a,{item:!0,xs:6,children:Object(s.jsx)("div",{className:"entryDiv",children:Object(s.jsx)(m.a,{className:"sideMargins",disableUnderline:!0,fullWidth:!0,readOnly:r.readOnly,value:P,placeholder:d?"Include a note here":void 0,onFocus:function(){return j(!1)},onChange:function(e){return A(e.target.value)},onBlur:function(e){ee(e.target.value,"note")}})})})]}),Object(s.jsx)(F,{open:H,setOpen:G,entry:t}),Object(s.jsx)(K,{open:Z,setOpen:q,entry:t}),Object(s.jsx)($,{open:Q,setOpen:_,entry:t})]})},Y=function(){return Object(s.jsxs)(O.a,{className:"gridHeader",container:!0,spacing:0,children:[Object(s.jsx)(O.a,{item:!0,xs:3,children:Object(s.jsx)("span",{className:"leftMargin",children:"ITEM"})}),Object(s.jsx)(O.a,{item:!0,xs:1,children:Object(s.jsx)("span",{className:"leftMargin",children:"COST"})}),Object(s.jsx)(O.a,{item:!0,xs:2,children:Object(s.jsx)("span",{className:"leftMargin",children:"EXCLUDE"})}),Object(s.jsx)(O.a,{item:!0,xs:6,children:Object(s.jsx)("span",{className:"leftMargin",children:"NOTE"})})]})},X=function(){var e=Object(c.useContext)(at).userState,t=Object(c.useContext)(Ge).sheetState,n=0;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(Y,{}),t.entries.map((function(t){var a,c;return(t.user===(null===(a=e.curUser)||void 0===a?void 0:a.id)||t.createdBy===(null===(c=e.curUser)||void 0===c?void 0:c.id)||t.item||t.cost||t.note)&&Object(s.jsx)(G,{entry:t,rowIdx:n++},t.id)}))]})},Z=n(100),q=n.n(Z),V=n(99),J=n.n(V),Q=function(e){var t=e.saveState;return Object(s.jsx)("span",{id:"autosaveMessage",children:t===a.Unsaved?Object(s.jsx)(s.Fragment,{}):t===a.Saving?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(J.a,{fontSize:"small"}),Object(s.jsx)("p",{className:"leftMarginSmall",children:"Saving..."})]}):Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(q.a,{fontSize:"small"}),Object(s.jsx)("p",{className:"leftMarginSmall",children:"Saved to Cloud"})]})})},_=function(e){var t=e.saveState,n=Object(c.useContext)(Ge).sheetState;return Object(s.jsx)(O.a,{container:!0,spacing:0,children:Object(s.jsxs)(O.a,{className:"header",item:!0,xs:12,children:[Object(s.jsxs)("span",{className:"leftMargin",children:["split the cost | ",Object(s.jsx)("b",{children:n.title})]}),Object(s.jsx)(Q,{saveState:t})]})})},ee=n(185),te=function(e){var t=e.open,n=e.setOpen,a=Object(c.useContext)(Ge),r=a.sheetState,i=a.sheetDispatch,o=Object(c.useState)(""),u=Object(l.a)(o,2),d=u[0],j=u[1],b=Object(c.useState)(!0),O=Object(l.a)(b,2),m=O[0],h=O[1],x=Object(c.useState)(""),f=Object(l.a)(x,2),p=f[0],v=f[1],g=Object(c.useState)(!0),y=Object(l.a)(g,2),N=y[0],C=y[1],k=Object(c.useState)(!0),D=Object(l.a)(k,2),I=D[0],B=D[1];function L(){j(""),v(""),h(!0),C(!0),B(!0)}function A(){L(),n(!1)}function T(){r.numUsers>10||!function(e,t){var n=e.toLocaleLowerCase(),a=t.toLocaleLowerCase(),s=n.length>0&&/^[a-zA-Z]+$/.test(n),c=a.length>0&&/^[a-zA-Z]+$/.test(a);if(h(s),C(c),!s||!c)return!1;var i=!0;return Object.entries(r.users).forEach((function(e){var t=e[1];t.firstName.toLocaleLowerCase()===n&&t.lastName.toLocaleLowerCase()===a&&(i=!1)})),B(i),i}(d,p)||(i({type:"addUser",firstName:d,lastName:p,email:""}),L(),n(!1))}return Object(s.jsxs)(w.a,{fullWidth:!0,disableBackdropClick:!0,maxWidth:"xs",onClose:A,open:t,onKeyPress:function(e){return S(e,"enter",T)},PaperProps:{className:"modal"},children:[Object(s.jsx)(P,{title:"Add a Friend",onClose:A}),Object(s.jsx)(U.a,{children:Object(s.jsxs)("div",{className:"modalInputRow",children:[Object(s.jsx)(ee.a,{className:"halfWidthModalInput",autoFocus:!0,label:"First Name",value:d,onChange:function(e){return j(e.target.value)},error:!m||!I,helperText:m?!I&&"Duplicate users not allowed.":"Please enter a valid name."}),Object(s.jsx)(ee.a,{className:"halfWidthModalInput",label:"Last Name",value:p,onChange:function(e){return v(e.target.value)},error:!N||!I,helperText:N?!I&&"Duplicate users not allowed.":"Please enter a valid name."})]})}),Object(s.jsx)(M.a,{className:"modalActions",children:Object(s.jsx)(E.a,{className:"modalConfirmButton rightMarginSmall",onClick:T,children:"Confirm"})})]})},ne=n(80),ae=n.n(ne),se=n(180),ce=n(181),re=n(86),ie=(n(128),n(135),re.a.initializeApp({apiKey:"AIzaSyCdGdwOcnXkNjD7-wLbhWQuXXdn4nUqHc8",authDomain:"split-the-cost-176bf.firebaseapp.com",projectId:"split-the-cost-176bf",storageBucket:"split-the-cost-176bf.appspot.com",messagingSenderId:"887247853169",appId:"1:887247853169:web:de028bf83a3c0f8ba6add0"})),le={toFirestore:function(e){return{id:e.id,timestamp:e.timestamp,lastAccessed:e.lastAccessed,lastEdited:e.lastEdited,title:e.title,entries:e.entries,users:e.users,numUsers:e.numUsers,createdBy:e.createdBy,readOnly:!!e.readOnly&&e.readOnly,customLink:e.customLink?e.customLink:""}},fromFirestore:function(e,t){var n=e.data(t);return{id:n.id,timestamp:n.timestamp,lastAccessed:n.lastAccessed,lastEdited:n.lastEdited,title:n.title,entries:n.entries,users:n.users,numUsers:n.numUsers,createdBy:n.createdBy,local:!1,readOnly:n.readOnly,customLink:n.customLink}}},oe=(ie.auth(),ie.firestore()),ue=(new re.a.auth.GoogleAuthProvider,n(82)),de=n.n(ue),je=n(20),be=function(e){var t=e.open,n=e.setOpen,r=Object(c.useContext)(Ge),i=r.sheetState,o=r.sheetDispatch,u=Object(je.f)(),j=Object(c.useState)(i.title),m=Object(l.a)(j,2),x=m[0],f=m[1],p=Object(c.useState)(!1),g=Object(l.a)(p,2),y=g[0],N=g[1],C=Object(c.useState)(!0),k=Object(l.a)(C,2),D=k[0],I=k[1],B=Object(c.useState)(i.customLink?i.customLink:i.id),A=Object(l.a)(B,2),T=A[0],F=A[1],W=Object(c.useState)(!1),z=Object(l.a)(W,2),H=z[0],K=z[1],$=Object(c.useState)(!0),G=Object(l.a)($,2),Y=G[0],X=G[1],Z=Object(c.useState)(!0),q=Object(l.a)(Z,2),V=q[0],J=q[1],Q=Object(c.useState)(i.readOnly),_=Object(l.a)(Q,2),te=_[0],ne=_[1],ae=Object(c.useState)(""),re=Object(l.a)(ae,2),ie=re[0],le=re[1],ue=Object(c.useState)(!1),be=Object(l.a)(ue,2),Oe=be[0],me=be[1],he=Object(c.useState)(!1),xe=Object(l.a)(he,2),fe=xe[0],pe=xe[1],ve=Object(c.useState)(a.Unsaved),ge=Object(l.a)(ve,2),ye=ge[0],Ne=ge[1];function Se(){N(!1),f(i.title),K(!1),X(!0),J(!0),F(i.customLink?i.customLink:i.id),Ne(a.Unsaved),n(!1),pe(!1),le(""),me(!1),ne(i.readOnly)}function Ce(){return(Ce=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T!==i.customLink&&T!==i.id){e.next=4;break}return K(!1),X(!0),e.abrupt("return",!0);case 4:if(!(T.trim().length<5||T.length>20)&&T.match(/^[0-9a-zA-Z]+$/)){e.next=7;break}return X(!1),e.abrupt("return",!1);case 7:return e.next=9,oe.collection("customLinks").doc(T).get();case 9:if(!e.sent.exists){e.next=14;break}return X(!1),J(!1),e.abrupt("return",!1);case 14:return e.next=16,oe.collection("sheets").doc(T).get();case 16:if(!e.sent.exists){e.next=21;break}return X(!1),J(!1),e.abrupt("return",!1);case 21:return Ne(a.Unsaved),K(!1),X(!0),J(!0),e.abrupt("return",!0);case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(){return x===i.title?(N(!1),I(!0),!0):x.trim().length<5||x.length>20||x.match(/[~`%^#@*+=\-[\]\\';,/{}|\\"<>]/)?(I(!1),!1):(Ne(a.Unsaved),N(!1),I(!0),!0)}function we(){return(we=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ie===i.title){e.next=3;break}return pe(!0),e.abrupt("return");case 3:return o({type:"deleteSheet"}),e.next=6,new Promise((function(e){return setTimeout(e,500)}));case 6:u.push("/"),me(!1);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ue(){return De.apply(this,arguments)}function De(){return(De=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ne(a.Saving),x!==i.title&&ke()&&o({type:"changeSheetTitle",title:x}),T!==i.id&&T!==i.customLink&&(o({type:"changeSheetLink",link:T}),u.push("/sheet/".concat(T))),te!==i.readOnly&&o({type:"updateReadOnly",readOnly:te}),e.next=6,new Promise((function(e){return setTimeout(e,500)}));case 6:Ne(a.Saved);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){f(i.title),F(i.customLink?i.customLink:i.id),ne(i.readOnly)}),[i.title,i.customLink,i.id,i.readOnly]),Object(s.jsxs)(w.a,{fullWidth:!0,disableBackdropClick:!0,maxWidth:"sm",onClose:Se,open:t,onKeyPress:function(e){return S(e,"enter",Ue)},PaperProps:{className:"modal"},children:[Object(s.jsx)(P,{title:"Settings",onClose:Se}),Object(s.jsx)(U.a,{className:"modalContent",children:Object(s.jsxs)(O.a,{container:!0,spacing:0,alignItems:"center",children:[Object(s.jsx)(O.a,{className:"bottomMargin",item:!0,xs:8,children:Object(s.jsx)(ee.a,{fullWidth:!0,inputRef:function(e){return e&&y&&e.focus()},value:x,error:!D,label:"Sheet Title",onChange:function(e){return f(e.target.value)},helperText:D?"":"Title must be between 5-20 alphanumeric characters (select special characters are allowed).",InputProps:{readOnly:!y,disableUnderline:!y}})}),Object(s.jsx)(O.a,{item:!0,xs:2}),Object(s.jsx)(O.a,{container:!0,item:!0,xs:2,justify:"flex-end",children:Object(s.jsx)(h.a,{onClick:function(){y?ke():N(!0)},children:y?Object(s.jsx)(de.a,{}):Object(s.jsx)(R.a,{})})}),!i.local&&Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(O.a,{className:"bottomMargin",item:!0,xs:8,children:Object(s.jsx)(ee.a,{fullWidth:!0,inputRef:function(e){return e&&H&&e.focus()},value:T,error:!Y,label:"Custom Sheet Link",onChange:function(e){return F(e.target.value)},helperText:Y?"":V?"Link must be between 5-20 characters and contain only letters and numbers.":"This custom link is already in use.",InputProps:{readOnly:!H,disableUnderline:!H,startAdornment:Object(s.jsx)("b",{children:"splitthecost.net/#/"})}})}),Object(s.jsx)(O.a,{item:!0,xs:2}),Object(s.jsx)(O.a,{container:!0,item:!0,xs:2,justify:"flex-end",children:Object(s.jsx)(h.a,{onClick:function(){H?function(){Ce.apply(this,arguments)}():K(!0)},children:H?Object(s.jsx)(de.a,{}):Object(s.jsx)(R.a,{})})})]}),Object(s.jsx)(O.a,{item:!0,xs:12,children:Object(s.jsx)(se.a,{control:Object(s.jsx)(ce.a,{checked:te,onChange:function(e){Ne(a.Unsaved),ne(e.target.checked)},color:"primary"}),label:"Read Only"})}),Object(s.jsx)(O.a,{className:"bottomMargin",item:!0,xs:8,children:Object(s.jsx)(ee.a,{fullWidth:!0,inputRef:function(e){return e&&Oe&&e.focus()},value:ie,placeholder:"Enter sheet name to confirm deletion.",error:fe,label:"Delete Sheet",onChange:function(e){return le(e.target.value)},helperText:fe?"Please enter the sheet name correctly (".concat(i.title,")"):"",InputProps:{readOnly:!Oe,disableUnderline:!Oe}})}),Object(s.jsxs)(O.a,{container:!0,item:!0,xs:4,justify:"flex-end",children:[Oe&&Object(s.jsx)(h.a,{onClick:function(){pe(!1),me(!1),le("")},children:Object(s.jsx)(L.a,{})}),Object(s.jsx)(h.a,{onClick:function(){Oe?function(){we.apply(this,arguments)}():me(!0)},children:Oe?Object(s.jsx)(de.a,{}):Object(s.jsx)(v.a,{})})]})]})}),Object(s.jsx)(M.a,{className:"modalActions",children:Object(s.jsx)(E.a,{className:"modalConfirmButton rightMarginSmall",disabled:ye===a.Saving||ye===a.Saved||H||y,onClick:Ue,children:ye===a.Unsaved?"Save":ye===a.Saving?"Saving...":"Saved"})})]})},Oe=function(e){var t=e.removeUser,n=e.open,a=e.setOpen,r=Object(c.useContext)(Ge),i=r.sheetState,l=r.sheetDispatch;function o(){a(!1)}function u(){t.id!==i.createdBy&&l({type:"removeUser",userId:t.id}),a(!1)}return Object(s.jsxs)(w.a,{fullWidth:!0,disableBackdropClick:!0,maxWidth:"xs",onClose:o,open:n,onKeyPress:function(e){return S(e,"enter",u)},PaperProps:{className:"modal"},children:[Object(s.jsx)(P,{title:"Remove Friend",onClose:o}),Object(s.jsxs)(U.a,{children:["Are you sure you want to remove ",Object(s.jsx)("b",{children:t.displayName})," and all associated entries from this sheet?"]}),Object(s.jsx)(M.a,{className:"modalActions",children:Object(s.jsx)(E.a,{className:"modalConfirmButton rightMarginSmall",onClick:u,children:"Confirm"})})]})},me=function(e){var t=e.open,n=e.setOpen,a=Object(je.f)(),r=Object(c.useContext)(Ge),i=r.sheetState,o=r.sheetDispatch,u=Object(c.useState)(""),d=Object(l.a)(u,2),j=d[0],b=d[1];function m(){n(!1)}return Object(c.useEffect)((function(){b(i.local?"GENERATE":"COPY")}),[i.local]),Object(s.jsxs)(w.a,{fullWidth:!0,disableBackdropClick:!0,maxWidth:"xs",onClose:m,open:t,PaperProps:{className:"modal"},children:[Object(s.jsx)(P,{title:"Share Sheet",onClose:m}),Object(s.jsx)(U.a,{className:"modalContent bottomMargin",children:Object(s.jsxs)(O.a,{container:!0,spacing:0,alignItems:"center",children:[Object(s.jsx)(O.a,{item:!0,xs:8,children:i.local?"Generate link to share with friends?":Object(s.jsxs)(s.Fragment,{children:["splitthecost.com/sheet/",Object(s.jsx)("b",{children:i.customLink?i.customLink:i.id})]})}),Object(s.jsx)(O.a,{item:!0,xs:1}),Object(s.jsx)(O.a,{container:!0,item:!0,xs:3,justify:"flex-end",children:Object(s.jsx)(E.a,{fullWidth:i.local,onClick:i.local?function(){o({type:"saveSheet"}),a.push("/sheet/".concat(i.id))}:function(){navigator.clipboard.writeText("splitthecost.net/#/sheet/".concat(i.id)),b("COPIED")},children:j})})]})})]})},he=n(101),xe=n.n(he),fe=n(102),pe=n.n(fe),ve=function(){var e,t=Object(c.useContext)(at).userState,n=Object(c.useContext)(Ge).sheetState,a=Object(c.useState)(!1),r=Object(l.a)(a,2),i=r[0],o=r[1],u=Object(c.useState)(!1),d=Object(l.a)(u,2),j=d[0],b=d[1],m=Object(c.useState)(!1),x=Object(l.a)(m,2),f=x[0],p=x[1],v=Object(c.useState)(!1),g=Object(l.a)(v,2),N=g[0],S=g[1],C=Object(c.useState)(),k=Object(l.a)(C,2),w=k[0],U=k[1];function D(e){U(e),b(!0)}return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)(O.a,{className:"usersBar",container:!0,spacing:0,children:[Object(s.jsxs)(O.a,{item:!0,container:!0,xs:11,alignItems:"center",children:[t.curUser&&Object(s.jsx)(T,{className:"leftMargin bottomMargin",user:t.curUser,userIdx:Object.keys(n.users).indexOf(t.curUser.id)}),Object.entries(n.users).map((function(e){var a=e[1];return(!t.curUser||a.id!==t.curUser.id)&&Object(s.jsx)(T,{className:"leftMargin bottomMargin",user:a,userIdx:Object.keys(n.users).indexOf(a.id),onRemove:!n.readOnly&&t.curUser&&n.createdBy!==a.id?D:void 0},a.id)})),!n.readOnly&&t.curUser&&Object(s.jsx)(y.a,{arrow:!0,title:"Add Friend",placement:"right",children:Object(s.jsx)(h.a,{className:"iconButton smallIconButton leftMargin bottomMargin",onClick:function(){o(!0)},children:Object(s.jsx)(ae.a,{})})})]}),Object(s.jsxs)(O.a,{item:!0,container:!0,xs:1,justify:"flex-end",alignItems:"center",children:[Object(s.jsx)(h.a,{className:"iconButton smallIconButton rightMargin bottomMargin",onClick:function(){S(!0)},children:Object(s.jsx)(xe.a,{id:"shareIcon"})}),(null===(e=t.curUser)||void 0===e?void 0:e.id)===n.createdBy&&Object(s.jsx)(h.a,{className:"iconButton smallIconButton rightMargin bottomMargin",onClick:function(){p(!0)},children:Object(s.jsx)(pe.a,{})})]})]}),Object(s.jsx)(te,{open:i,setOpen:o}),Object(s.jsx)(be,{open:f,setOpen:p}),w&&Object(s.jsx)(Oe,{removeUser:w,open:j,setOpen:b}),Object(s.jsx)(me,{open:N,setOpen:S})]})},ge=function(){return Object(s.jsxs)(O.a,{className:"gridHeader roundedTop",container:!0,spacing:0,children:[Object(s.jsx)(O.a,{item:!0,xs:2}),Object(s.jsx)(O.a,{item:!0,xs:5,children:Object(s.jsx)("span",{className:"leftMargin",children:"TOTAL SPENT"})}),Object(s.jsx)(O.a,{item:!0,xs:5,children:Object(s.jsx)("span",{className:"leftMargin",children:"TOTAL OWED"})})]})},ye=function(e){var t=e.user,n=e.data,a=e.idx,r=Object(c.useContext)(Ge).sheetState;return Object(s.jsxs)(O.a,{className:"".concat(a%2?"lightRow":"darkRow"," ").concat(a===r.numUsers-1&&"roundedBottom"),container:!0,spacing:0,children:[Object(s.jsx)(O.a,{className:"sideDialogRow",item:!0,xs:2,children:Object(s.jsx)(C,{className:"leftMargin",user:t,userIdx:Object.keys(r.users).indexOf(t.id),tooltipPlacement:"left"})}),Object(s.jsx)(O.a,{className:"sideDialogRow",item:!0,xs:5,children:Object(s.jsx)(m.a,{className:"sideMargins",readOnly:!0,disableUnderline:!0,fullWidth:!0,value:n?null===n||void 0===n?void 0:n.totalSpent.toFixed(2):0,startAdornment:Object(s.jsx)(x.a,{position:"start",children:"$"})})}),Object(s.jsx)(O.a,{className:"sideDialogRow",item:!0,xs:5,children:Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(m.a,{readOnly:!0,disableUnderline:!0,fullWidth:!0,className:"sideMargins",value:n?null===n||void 0===n?void 0:n.totalOwed.toFixed(2):0,startAdornment:Object(s.jsx)(x.a,{position:"start",children:"$"})})})})]})},Ne=function(){var e=Object(c.useContext)(Ge).sheetState,t=Object(c.useContext)(at).userState,n=Object(c.useState)({}),a=Object(l.a)(n,2),r=a[0],i=a[1],o=0;return Object(c.useEffect)((function(){i(function(e,t){var n={};return Object.entries(t).forEach((function(e){var t=e[1];n[t.id]={totalSpent:0,totalOwed:0}})),e.forEach((function(e){n[e.user].totalSpent+=e.cost;var a=Object.keys(t).filter((function(t){return!e.exclude.includes(t)})),s=e.cost/a.length;a.forEach((function(t){t!==e.user&&(n[t].totalOwed+=s)}))})),n}(e.entries,e.users))}),[e]),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(ge,{}),t.curUser&&Object(s.jsx)(ye,{user:t.curUser,data:r[t.curUser.id],idx:o++}),Object.entries(e.users).map((function(e){var n,a=e[1];return a.id!==(null===(n=t.curUser)||void 0===n?void 0:n.id)&&Object(s.jsx)(ye,{user:a,data:r[a.id],idx:o++},a.id)}))]})},Se=n(104),Ce=n.n(Se),ke=n(103),we=n.n(ke),Ue=n(186),De=n(182),Me=n(184),Ee=function(){return Object(s.jsxs)(O.a,{className:"gridHeader roundedTop",container:!0,spacing:0,children:[Object(s.jsx)(O.a,{item:!0,xs:8,children:Object(s.jsx)("span",{className:"leftMargin",children:"TRANSACTIONS"})}),Object(s.jsx)(O.a,{item:!0,xs:4,children:Object(s.jsx)("span",{className:"leftMargin",children:"TOTAL"})})]})},Ie=function(e){var t=e.user,n=e.data,a=e.idx,r=Object(c.useContext)(Ge).sheetState,i=Object(c.useContext)(at).userState,l=n?n.theyOwe-n.youOwe:0,o=l<0?i.curUser:t,u=l<0?t:i.curUser;return Object(s.jsxs)(O.a,{className:"".concat(a%2?"lightRow":"darkRow"," ").concat(a===r.numUsers-2&&"roundedBottom"),container:!0,spacing:0,children:[Object(s.jsx)(O.a,{className:"sideDialogRow",item:!0,xs:2,children:Object(s.jsx)(C,{className:"leftMargin",user:o,userIdx:Object.keys(r.users).indexOf(o.id),tooltipPlacement:"left"})}),Object(s.jsx)(O.a,{className:"sideDialogRow",item:!0,xs:4,children:0===l?Object(s.jsx)("div",{className:"leftMargin evenArrow",children:Object(s.jsx)("span",{children:"EVEN"})}):Object(s.jsx)("div",{className:"arrow ".concat(l<0?"redArrow":"greenArrow"),children:Object(s.jsx)("span",{className:"leftMarginSmall",children:l<0?"YOU OWE":"OWES YOU"})})}),Object(s.jsx)(O.a,{className:"sideDialogRow",item:!0,xs:2,children:Object(s.jsx)(C,{user:u,userIdx:Object.keys(r.users).indexOf(u.id),tooltipPlacement:"top"})}),Object(s.jsx)(O.a,{className:"sideDialogRow",item:!0,xs:4,children:Object(s.jsx)(m.a,{className:"sideMargins",readOnly:!0,disableUnderline:!0,fullWidth:!0,inputComponent:g.a,inputProps:{decimalScale:2,allowNegative:!1,thousandSeparator:","},value:Math.abs(l).toFixed(2),startAdornment:Object(s.jsx)(x.a,{position:"start",children:"$"})})})]})},Be=function(){var e=Object(c.useContext)(Ge).sheetState,t=Object(c.useContext)(at).userState,n=Object(c.useState)(),a=Object(l.a)(n,2),r=a[0],i=a[1],o=0;return Object(c.useEffect)((function(){t.curUser&&i(function(e,t,n){var a={user:e,totalSpent:0,totalOwed:0,userBreakdown:{}};return Object.entries(n).forEach((function(t){var n=t[1];n!==e&&(a.userBreakdown[n.id]={theyOwe:0,youOwe:0})})),t.forEach((function(t){var s=Object.keys(n).length-t.exclude.length;t.user===e.id?(a.totalSpent+=t.cost,Object.keys(n).filter((function(e){return!t.exclude.includes(e)&&e!==t.user})).forEach((function(e){a.userBreakdown[e].theyOwe+=t.cost/s}))):t.exclude.includes(e.id)||(a.totalOwed+=t.cost/s,a.userBreakdown[t.user].youOwe+=t.cost/s)})),a}(t.curUser,e.entries,e.users))}),[t.curUser,e]),!t.curUser||!r||e.numUsers<2?Object(s.jsx)("div",{className:"noBreakdownData",children:"No data to break down. \ud83e\udd74"}):Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(Ee,{}),Object.entries(e.users).map((function(e){var n=e[1];return n.id!==t.curUser.id&&Object(s.jsx)(Ie,{user:n,data:r.userBreakdown[n.id],idx:o++},n.id)}))]})},Le=n(90),Pe=n(183),Ae=function(){var e=Object(c.useState)(!0),t=Object(l.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)("ov"),i=Object(l.a)(r,2),o=i[0],u=i[1];return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(z.a,{children:n&&Object(s.jsx)(z.b.div,{className:"sideDialog",animate:{x:0,opacity:1},initial:{x:600,opacity:0},exit:{x:600,opacity:0},transition:{duration:.3},children:Object(s.jsxs)(Le.a,{value:o,children:[Object(s.jsxs)(Ue.a,{value:o,onChange:function(e,t){u(t)},indicatorColor:"primary",textColor:"primary",children:[Object(s.jsx)(De.a,{className:"sideDialogTab",value:"ov",label:"OVERVIEW"}),Object(s.jsx)(De.a,{className:"sideDialogTab",value:"bd",label:"BREAKDOWN"})]}),Object(s.jsx)(z.b.div,{animate:"ov"===o?{opacity:1}:{opacity:0},transition:{duration:.7},children:Object(s.jsx)(Pe.a,{className:"sideDialogContent",value:"ov",children:Object(s.jsx)(Ne,{})})}),Object(s.jsx)(z.b.div,{animate:"bd"===o?{opacity:1}:{opacity:0},transition:{duration:.7},children:Object(s.jsx)(Pe.a,{className:"sideDialogContent",value:"bd",children:Object(s.jsx)(Be,{})})})]})})}),Object(s.jsx)(z.b.div,{className:"sideDialogFab",animate:n?{x:-440}:{x:0},transition:{duration:.3},children:Object(s.jsx)(Me.a,{variant:"extended",size:"medium",onClick:function(){a(!n)},children:n?Object(s.jsx)(we.a,{}):Object(s.jsx)(Ce.a,{})})})]})},Te=function(){var e=Object(c.useContext)(Ge).sheetDispatch,t=Object(c.useContext)(at).userState;return Object(s.jsx)("div",{className:"addItemFabDiv",children:Object(s.jsxs)(Me.a,{className:"addItemFab",variant:"extended",size:"medium",onClick:function(){e({type:"addEntry",createdBy:t.curUser.id,item:"",cost:0,exclude:[],note:""})},children:[Object(s.jsx)(ae.a,{}),Object(s.jsx)("span",{className:"leftMarginSmall",children:"Add Expense"})]})})},Fe=n(52);function We(e,t){switch(t.type){case"addEntry":return function(e,t){var n={id:Object(Fe.a)(),timestamp:new Date(Date.now()).toUTCString(),lastEdited:Date.now(),item:t.item?t.item:"",cost:t.cost?t.cost:0,exclude:t.exclude?t.exclude:[],note:t.note?t.note:"",user:t.createdBy,createdBy:t.createdBy},a=Object(o.a)(Object(o.a)({},e),{},{entries:[].concat(Object(k.a)(e.entries),[n]),lastEdited:Date.now(),readOnly:!1});return Re(a,t.local),a}(e,t);case"removeEntry":return function(e,t){var n=e.entries.filter((function(e){return e.id!==t.entryId})),a=Object(o.a)(Object(o.a)({},e),{},{entries:n,lastEdited:Date.now()});return Re(a,t.local),a}(e,t);case"updateEntry":return function(e,t){var n=t.entry,a=t.value,s=Object(o.a)(Object(o.a)({},n),{},{lastEdited:Date.now()});if("item"===t.section){if(n.item===a)return e;s=Object(o.a)(Object(o.a)({},s),{},{item:a})}else if("cost"===t.section)s=Object(o.a)(Object(o.a)({},s),{},{cost:Number(a.replaceAll(",",""))});else if("user"===t.section){if(n.user===a)return e;s=Object(o.a)(Object(o.a)({},s),{},{user:a})}else{if(n.note===a)return e;s=Object(o.a)(Object(o.a)({},s),{},{note:a})}var c=Object(k.a)(e.entries);return c[c.indexOf(n)]=s,Object(o.a)(Object(o.a)({},e),{},{entries:c,lastEdited:Date.now()})}(e,t);case"addUser":return function(e,t){if(e.numUsers>10)return e;var n=!1;if(Object.entries(e.users).forEach((function(e){var a=e[1];a.firstName===t.firstName&&a.lastName===t.lastName&&(n=!0)})),n)return e;var a={id:Object(Fe.a)(),firstName:t.firstName,lastName:t.lastName,initials:"".concat(t.firstName.charAt(0)).concat(t.lastName.charAt(0)).toLocaleUpperCase(),displayName:"".concat(t.firstName," ").concat(t.lastName),email:t.email},s=Object(o.a)(Object(o.a)({},e),{},{users:Object(o.a)(Object(o.a)({},e.users),{},Object(j.a)({},a.id,a)),numUsers:e.numUsers+1,lastEdited:Date.now()});return Re(s,t.local),s}(e,t);case"removeUser":return function(e,t){if(1===e.numUsers)return e;var n=Object(o.a)({},e.users);delete n[t.userId];var a=e.entries.filter((function(e){return e.createdBy!==t.userId&&e.user!==t.userId}));a.forEach((function(e,n){if(e.exclude.includes(t.userId)){var s=e.exclude.filter((function(e){return t.userId!==e})),c=Object(o.a)(Object(o.a)({},e),{},{exclude:s});a[n]=c}}));var s=Object(o.a)(Object(o.a)({},e),{},{entries:a,users:n,numUsers:e.numUsers-1,lastEdited:Date.now()});return Re(s,t.local),s}(e,t);case"updateExcludedUsers":return function(e,t){var n=Object(o.a)(Object(o.a)({},t.entry),{},{exclude:t.exclude}),a=Object(k.a)(e.entries);a[a.indexOf(t.entry)]=n;var s=Object(o.a)(Object(o.a)({},e),{},{entries:a,lastEdited:Date.now()});return Re(s,t.local),s}(e,t);case"removeExcludedUser":return function(e,t){var n=Object(o.a)(Object(o.a)({},t.entry),{},{exclude:t.entry.exclude.filter((function(e){return e!==t.userId}))}),a=Object(k.a)(e.entries);a[a.indexOf(t.entry)]=n;var s=Object(o.a)(Object(o.a)({},e),{},{entries:a,lastEdited:Date.now()});return Re(s,t.local),s}(e,t);case"changeSheetTitle":return function(e,t){if(e.title===t.title)return e;var n=Object(o.a)(Object(o.a)({},e),{},{title:t.title,lastEdited:Date.now()});return Re(n),n}(e,t);case"changeSheetLink":return function(e,t){if(!t.link||e.customLink===t.link||t.link.length<5)return e;var n=Object(o.a)(Object(o.a)({},e),{},{customLink:t.link,lastEdited:Date.now()});Re(n),e.customLink&&oe.collection("customLinks").doc(e.customLink).delete();var a={sheetId:e.id};return oe.collection("customLinks").doc(t.link).set(a),n}(e,t);case"saveSheet":return function(e,t){if(!e.local)return e;var n=Object(o.a)(Object(o.a)({},e),{},{local:!1,lastEdited:Date.now()});return Re(n),n}(e);case"autosaveSheet":return function(e,t){Date.now()-e.lastEdited<11e3&&(t.setAutosaveState(a.Saving),Re(e));return e}(e,t);case"updateReadOnly":return function(e,t){var n=Object(o.a)(Object(o.a)({},e),{},{readOnly:t.readOnly});return Re(n),n}(e,t);case"deleteSheet":return function(e,t){if(e.local)return e;oe.collection("deletedSheets").withConverter(le).doc(e.id).set(e),oe.collection("sheets").doc(e.id).delete(),e.customLink&&(oe.collection("deletedCustomLinks").doc(e.customLink).set({sheetId:e.id}),oe.collection("customLinks").doc(e.customLink).delete());return e}(e);case"updateSheetState":return t.sheetState;default:return e}}function Re(e,t){t||e.local||oe.collection("sheets").withConverter(le).doc(e.id).set(e)}var ze,He=function(e){var t=e.open,n=Object(c.useContext)(Ge).sheetState,a=Object(c.useContext)(at).userDispatch,r=Object(c.useState)(),i=Object(l.a)(r,2),o=i[0],u=i[1];function d(){a({type:"updateCurUser",user:o})}return Object(s.jsxs)(w.a,{fullWidth:!0,disableBackdropClick:!0,maxWidth:"sm",open:t,onKeyPress:function(e){return S(e,"enter",d)},PaperProps:{className:"modal"},children:[Object(s.jsx)(P,{title:"Who are You?"}),Object(s.jsx)(U.a,{children:Object.entries(n.users).map((function(e){var t=e[1];return Object(s.jsx)(T,{className:"bottomMargin rightMargin ".concat((null===o||void 0===o?void 0:o.id)===t.id&&"selectedChip"),user:t,userIdx:Object.keys(n.users).indexOf(t.id),onClick:u},t.id)}))}),Object(s.jsx)(M.a,{className:"modalActions",children:Object(s.jsx)(E.a,{className:"modalConfirmButton rightMarginSmall",disabled:!o,onClick:d,children:"Confirm"})})]})},Ke=function(){return Object(s.jsxs)("div",{className:"errorPage",children:[Object(s.jsx)("span",{className:"errorPageHeader",children:Object(s.jsx)("b",{children:"coming soon..."})}),Object(s.jsx)("span",{className:"errorPageSubtitle",children:"We're currently working on a mobile friendly version of splithecost - in the meantime, please visit us on a computer!"})]})},$e={title:"Loading Sheet...",timestamp:"",lastAccessed:0,lastEdited:0,entries:[],users:{},numUsers:0,createdBy:"",local:!0,readOnly:!0,id:""},Ge=Object(c.createContext)({sheetState:$e,sheetDispatch:function(){return null}}),Ye=function(){var e=window.innerWidth<=1e3,t=Object(je.f)(),n=Object(je.g)(),r=Object(je.h)().sheetId,i=Object(c.useReducer)(We,$e),u=Object(l.a)(i,2),O=u[0],m=u[1],h=Object(c.useContext)(at).userState,x=Object(c.useState)(O.local?a.Unsaved:a.Saved),f=Object(l.a)(x,2),p=f[0],v=f[1];function g(){return(g=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O.local){e.next=5;break}return m({type:"autosaveSheet",setAutosaveState:v}),e.next=4,new Promise((function(e){return setTimeout(e,1500)}));case 4:v(a.Saved);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=Object(b.a)(d.a.mark((function e(){var n,a,s,c,i,l,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.collection("sheets").withConverter(le).doc(r).get();case 2:if(n=e.sent,!(a=n.data())){e.next=7;break}return m({type:"updateSheetState",sheetState:Object(o.a)(Object(o.a)({},a),{},{lastAccessed:Date.now(),readOnly:!1})}),e.abrupt("return");case 7:return e.next=9,oe.collection("customLinks").doc(r).get();case 9:if(s=e.sent,!(c=s.data())){e.next=20;break}return i=c.sheetId,e.next=15,oe.collection("sheets").withConverter(le).doc(i).get();case 15:if(l=e.sent,!(u=l.data())){e.next=20;break}return m({type:"updateSheetState",sheetState:Object(o.a)(Object(o.a)({},u),{},{lastAccessed:Date.now()})}),e.abrupt("return");case 20:t.push({pathname:"/invalidsheet",state:{sheetId:r}});case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){r&&"new"!==r?function(){y.apply(this,arguments)}():function(){if(!h.curUser||!n.state.title)return void t.push("/create");var e={id:Object(Fe.a)(10),timestamp:new Date(Date.now()).toUTCString(),lastAccessed:Date.now(),lastEdited:Date.now(),title:n.state.title,entries:[],users:Object(j.a)({},h.curUser.id,h.curUser),numUsers:1,createdBy:h.curUser.id,local:!0,readOnly:!1};m({type:"updateSheetState",sheetState:e}),m({type:"addEntry",createdBy:h.curUser.id})}()}),[]),Object(c.useEffect)((function(){v(O.local?a.Unsaved:a.Saved);var e=setInterval((function(){!function(){g.apply(this,arguments)}()}),1e4);return function(){return clearInterval(e)}}),[O.local]),Object(s.jsx)(Ge.Provider,{value:{sheetState:O,sheetDispatch:m},children:e?Object(s.jsx)(Ke,{}):Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(_,{saveState:p}),Object(s.jsx)(ve,{}),Object(s.jsx)(X,{}),Object(s.jsx)(Ae,{}),!O.readOnly&&h.curUser&&Object(s.jsx)(Te,{}),Object(s.jsx)(He,{open:!h.curUser})]})})},Xe=n(24),Ze=n.p+"static/media/homepage.d372b9ab.png",qe=n.p+"static/media/blob.244efd39.svg",Ve=function(){return window.innerWidth<1e3?Object(s.jsx)(Ke,{}):Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(O.a,{id:"homepageHeader",container:!0,alignContent:"center",children:Object(s.jsxs)(O.a,{item:!0,container:!0,xs:12,justify:"flex-end",children:[Object(s.jsx)(Xe.b,{className:"noTextDecoration",to:"/",children:Object(s.jsx)("span",{className:"homepageLink",children:"about"})}),Object(s.jsx)(Xe.b,{className:"noTextDecoration",to:"/",children:Object(s.jsx)("span",{className:"homepageLink",children:"contact"})})]})}),Object(s.jsxs)(O.a,{className:"homepage",container:!0,spacing:0,alignContent:"center",children:[Object(s.jsxs)(O.a,{item:!0,container:!0,xs:8,justify:"center",children:[Object(s.jsx)("img",{id:"homepageBlob",src:qe,alt:"blob"}),Object(s.jsx)("img",{id:"homepageImg",src:Ze,alt:"homepage"})]}),Object(s.jsx)(O.a,{item:!0,container:!0,xs:4,alignItems:"center",alignContent:"center",children:Object(s.jsxs)("div",{id:"homepageText",children:[Object(s.jsx)("span",{id:"homepageTitle",children:"welcome to splitthecost."}),Object(s.jsx)("span",{id:"homepageSubtitle",children:"shared expenses for trips/events made simple. no sign up required!"}),Object(s.jsx)(Xe.b,{className:"noTextDecoration",to:"/create",children:Object(s.jsx)(E.a,{className:"createNewButton",children:"create new sheet"})})]})})]})]})};function Je(e,t){switch(t.type){case"updateCurUser":return function(e,t){return Object(o.a)(Object(o.a)({},e),{},{curUser:t.user})}(e,t);case"setDarkMode":return function(e,t){return Object(o.a)(Object(o.a)({},e),{},{darkMode:t.darkMode})}(e,t);default:return e}}!function(e){e[e.SheetName=1]="SheetName",e[e.DisplayName=2]="DisplayName"}(ze||(ze={}));var Qe=function(){var e=Object(c.useContext)(at).userDispatch,t=Object(je.f)(),n=Object(c.useState)(ze.SheetName),a=Object(l.a)(n,2),r=a[0],i=a[1],o=Object(c.useState)(""),u=Object(l.a)(o,2),d=u[0],j=u[1],b=Object(c.useState)(!1),m=Object(l.a)(b,2),x=m[0],f=m[1],p=Object(c.useState)(!1),v=Object(l.a)(p,2),g=v[0],y=v[1],N=Object(c.useState)(""),S=Object(l.a)(N,2),C=S[0],k=S[1],w=Object(c.useState)(""),U=Object(l.a)(w,2),M=U[0],I=U[1];function B(){var n={id:Object(Fe.a)(),firstName:C,lastName:M,initials:"".concat(C.charAt(0)).concat(M.charAt(0)).toLocaleUpperCase(),displayName:"".concat(C," ").concat(M),email:""};e({type:"updateCurUser",user:n}),t.push({pathname:"/sheet/new",state:{title:d}})}function P(){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{className:"giantHeader",children:"Give your sheet a name:"}),Object(s.jsx)(ee.a,{className:"giantTextField",fullWidth:!0,placeholder:"Sheet name",value:d,onChange:function(e){return j(e.target.value)},inputProps:{className:"giantInput"}}),Object(s.jsx)(se.a,{className:"termsAndConditions",control:Object(s.jsx)(D.a,{value:g,onClick:function(){return y(!g)},color:"primary"}),label:Object(s.jsxs)(s.Fragment,{children:["I accept the SplitTheCost ",Object(s.jsx)(Xe.b,{to:"/tos",children:"terms"}),"."]})}),Object(s.jsx)(E.a,{className:"continueButton",disabled:!g||!x,onClick:function(){return i(ze.DisplayName)},children:"continue"})]})}return Object(c.useEffect)((function(){f(!(d.trim().length<5||d.length>20||d.match(/[~`%^#@*+=\-[\]\\';,/{}|\\"<>]/)))}),[d]),Object(s.jsxs)(z.b.div,{initial:{x:2e3},animate:{x:0},transition:{type:"spring",duration:.8},children:[Object(s.jsxs)(O.a,{className:"createNewSheet",container:!0,spacing:0,children:[Object(s.jsx)(O.a,{item:!0,xs:1}),Object(s.jsx)(O.a,{className:"createNewSheetItem",item:!0,xs:8,children:r===ze.SheetName?P():r===ze.DisplayName?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{className:"giantHeader",children:"Yup, we're basically done. What's your name?"}),Object(s.jsxs)("div",{children:[Object(s.jsx)(ee.a,{className:"giantTextField halfWidthModalInput",fullWidth:!0,placeholder:"First name",value:C,onChange:function(e){return k(e.target.value)},inputProps:{className:"giantInput"}}),Object(s.jsx)(ee.a,{className:"leftMarginLarge giantTextField halfWidthModalInput",fullWidth:!0,placeholder:"Last name",value:M,onChange:function(e){return I(e.target.value)},inputProps:{className:"giantInput"}})]}),Object(s.jsxs)("div",{children:[Object(s.jsx)(E.a,{className:"continueButton",onClick:function(){return i(r-1)},children:"go back"}),Object(s.jsx)(E.a,{className:"leftMargin continueButton",disabled:!C.trim()||!M.trim(),onClick:B,children:"finish"})]})]}):P()})]}),Object(s.jsxs)("div",{className:"stepIndicator",children:[Object(s.jsx)(Xe.b,{to:"/",children:Object(s.jsx)(h.a,{size:"small",children:Object(s.jsx)(L.a,{})})}),Object(s.jsxs)("span",{className:"leftMarginSmall",children:["Create a sheet (Step ",r," of 2)"]})]})]})},_e=function(){return Object(s.jsxs)("div",{className:"errorPage",children:[Object(s.jsxs)("span",{className:"errorPageHeader",children:[Object(s.jsx)("b",{children:"404"})," - this page doesn't exist."]}),Object(s.jsx)(Xe.b,{className:"noTextDecoration",to:"/",children:Object(s.jsx)(E.a,{className:"createNewButton",children:"home"})})]})},et=function(){var e,t=Object(je.g)();return Object(s.jsxs)("div",{className:"errorPage",children:[Object(s.jsxs)("span",{className:"errorPageHeader",children:["sorry, we couldn't find a sheet with id \"",Object(s.jsx)("b",{children:null===(e=t.state)||void 0===e?void 0:e.sheetId}),'".']}),Object(s.jsx)(Xe.b,{className:"noTextDecoration",to:"/create",children:Object(s.jsx)(E.a,{className:"createNewButton",children:"create new sheet"})})]})},tt=function(){return Object(s.jsxs)("div",{id:"tos",children:[Object(s.jsx)("h2",{children:"Terms of Service"}),Object(s.jsxs)("p",{children:["SplitTheCost stores all data in ",Object(s.jsx)("b",{children:"unencrypted plaintext"})," and is not responsible for the loss or unauthorized release of any data. In other words,"," ",Object(s.jsx)("b",{children:"don't use SplitTheCost for private or confidential information! "}),"SplitTheCost is not liable for any direct, indirect, incidental, consequential, or special damages or losses resulting from authorized or unauthorized use of or access to this platform.",Object(s.jsx)("br",{}),Object(s.jsx)("br",{}),"That's about it! Have fun and enjoy to your heart's desire."]})]})},nt={curUser:void 0,darkMode:!1},at=Object(c.createContext)({userState:nt,userDispatch:function(){return null}});var st=function(){var e=Object(c.useReducer)(Je,nt),t=Object(l.a)(e,2),n=t[0],a=t[1];return Object(s.jsx)(Xe.a,{children:Object(s.jsx)(at.Provider,{value:{userState:n,userDispatch:a},children:Object(s.jsxs)(je.c,{children:[Object(s.jsx)(je.a,{path:"/",exact:!0,component:Ve}),Object(s.jsx)(je.a,{path:"/create",exact:!0,component:Qe}),Object(s.jsx)(je.a,{path:"/sheet/:sheetId",exact:!0,component:Ye}),Object(s.jsx)(je.a,{path:"/invalidsheet",exact:!0,component:et}),Object(s.jsx)(je.a,{path:"/tos",exact:!0,component:tt}),Object(s.jsx)(je.a,{component:_e})]})})})},ct=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,194)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),c(e),r(e)}))};i.a.render(Object(s.jsx)(st,{}),document.getElementById("root")),ct()}},[[132,1,2]]]);
//# sourceMappingURL=main.2bfdbdb4.chunk.js.map